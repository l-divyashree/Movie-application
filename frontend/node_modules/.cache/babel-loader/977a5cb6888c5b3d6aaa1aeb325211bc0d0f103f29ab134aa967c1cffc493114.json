{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate,useLocation}from'react-router-dom';import{CalendarIcon,ClockIcon,MapPinIcon,CurrencyRupeeIcon,InformationCircleIcon,ChevronLeftIcon}from'@heroicons/react/24/outline';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SeatSelection=()=>{var _show$venue;const{showId}=useParams();const navigate=useNavigate();const location=useLocation();const{isAuthenticated}=useAuth();// Get show and movie data from navigation state\nconst{show,movie}=location.state||{};const[seats,setSeats]=useState([]);const[selectedSeats,setSelectedSeats]=useState([]);const[reservedSeats,setReservedSeats]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[reservingSeats,setReservingSeats]=useState(false);const[bookingSummary,setBookingSummary]=useState(null);const[showSummary,setShowSummary]=useState(false);// API base URL\nconst API_BASE_URL='http://localhost:8080/api';useEffect(()=>{if(!isAuthenticated){navigate('/login',{state:{from:location.pathname}});return;}loadSeats();},[showId,isAuthenticated,navigate,location]);const loadSeats=async()=>{try{setLoading(true);const response=await fetch(\"\".concat(API_BASE_URL,\"/booking/shows/\").concat(showId,\"/seats\"));if(!response.ok){throw new Error('Failed to fetch seats');}const seatsData=await response.json();setSeats(seatsData);}catch(err){console.error('Error loading seats:',err);setError('Failed to load seat layout');}finally{setLoading(false);}};useEffect(()=>{if(!isAuthenticated){navigate('/login',{state:{from:location.pathname}});return;}loadSeats();},[showId,isAuthenticated,navigate,location]);// Reserve seats when selection changes\nuseEffect(()=>{let reserveTimeout;if(selectedSeats.length>0){setReservingSeats(true);// Reserve seats after 500ms delay to avoid too many API calls\nreserveTimeout=setTimeout(async()=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/booking/seats/reserve\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('authToken'))},body:JSON.stringify({showId:parseInt(showId),seatIds:selectedSeats.map(seat=>seat.id),reservationTimeMinutes:10})});if(response.ok){setReservedSeats(prev=>[...prev,...selectedSeats.map(seat=>seat.id)]);}}catch(err){console.error('Error reserving seats:',err);}finally{setReservingSeats(false);}},500);}return()=>{if(reserveTimeout){clearTimeout(reserveTimeout);}};},[selectedSeats,showId]);const handleSeatClick=seat=>{// Can't select unavailable or blocked seats (unless reserved by current user)\nif(!seat.isAvailable||seat.isBlocked&&!reservedSeats.includes(seat.id)){return;}setSelectedSeats(prev=>{const isSelected=prev.some(s=>s.id===seat.id);if(isSelected){// Unselect seat\nreturn prev.filter(s=>s.id!==seat.id);}else{// Select seat (max 10 seats)\nif(prev.length>=10){alert('You can select maximum 10 seats at a time');return prev;}return[...prev,seat];}});};const getSeatStatusClass=seat=>{const isSelected=selectedSeats.some(s=>s.id===seat.id);if(!seat.isAvailable){return'bg-red-500 cursor-not-allowed';}if(seat.isBlocked&&!reservedSeats.includes(seat.id)){return'bg-orange-400 cursor-not-allowed';}if(isSelected){return'bg-green-500 text-white';}// Available seat - color by type\nswitch(seat.seatType){case'PREMIUM':return'bg-purple-200 hover:bg-purple-300 border-purple-400';case'STANDARD':return'bg-blue-200 hover:bg-blue-300 border-blue-400';case'ECONOMY':return'bg-gray-200 hover:bg-gray-300 border-gray-400';default:return'bg-gray-200 hover:bg-gray-300 border-gray-400';}};const getSeatPrice=seatType=>{switch(seatType){case'PREMIUM':return((show===null||show===void 0?void 0:show.price)||250)+100;case'STANDARD':return(show===null||show===void 0?void 0:show.price)||250;case'ECONOMY':return((show===null||show===void 0?void 0:show.price)||250)-50;default:return(show===null||show===void 0?void 0:show.price)||250;}};const calculateTotal=()=>{return selectedSeats.reduce((total,seat)=>{return total+(seat.price||0);},0);};const getBookingSummary=async()=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/booking/summary?showId=\").concat(showId,\"&seatIds=\").concat(selectedSeats.map(s=>s.id).join(',')),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('authToken'))}});if(response.ok){const summary=await response.json();return summary;}}catch(err){console.error('Error getting booking summary:',err);}return null;};const handleProceedToPayment=async()=>{if(selectedSeats.length===0){alert('Please select at least one seat');return;}const summary=await getBookingSummary();navigate('/payment',{state:{show,movie,selectedSeats,bookingSummary:summary,showId:parseInt(showId),seatIds:selectedSeats.map(s=>s.id),from:location.pathname}});};// Group seats by row\nconst groupSeatsByRow=seats=>{const grouped={};seats.forEach(seat=>{var _seat$seatNumber;const row=seat.rowNumber||((_seat$seatNumber=seat.seatNumber)===null||_seat$seatNumber===void 0?void 0:_seat$seatNumber.charAt(0))||'A';if(!grouped[row]){grouped[row]=[];}grouped[row].push(seat);});// Sort seats within each row\nObject.keys(grouped).forEach(row=>{grouped[row].sort((a,b)=>{var _a$seatNumber,_b$seatNumber;const aNum=parseInt(((_a$seatNumber=a.seatNumber)===null||_a$seatNumber===void 0?void 0:_a$seatNumber.slice(1))||a.columnNumber||1);const bNum=parseInt(((_b$seatNumber=b.seatNumber)===null||_b$seatNumber===void 0?void 0:_b$seatNumber.slice(1))||b.columnNumber||1);return aNum-bNum;});});return grouped;};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading seat layout...\"})]})});}if(error||!show){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 text-lg\",children:error||'Show data not available'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/movies'),className:\"mt-4 text-blue-600 hover:text-blue-800\",children:\"Back to Movies\"})]})});}const groupedSeats=groupSeatsByRow(seats);const rows=Object.keys(groupedSeats).sort();return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),className:\"text-blue-600 hover:text-blue-800 mb-2\",children:\"\\u2190 Back to Shows\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Select Seats\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-sm text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:movie===null||movie===void 0?void 0:movie.title})}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(MapPinIcon,{className:\"h-4 w-4 mr-1\"}),(_show$venue=show.venue)===null||_show$venue===void 0?void 0:_show$venue.name]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-4 w-4 mr-1\"}),new Date(show.showDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-4 w-4 mr-1\"}),show.showTime]})]})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-4 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-800 text-white py-2 px-8 rounded-full inline-block mb-2\",children:\"SCREEN\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"All eyes this way please!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-center space-x-6 mb-6 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-gray-200 border border-gray-400 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Available\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-green-500 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Selected\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-red-500 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Booked\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-orange-400 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Reserved\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto\",children:rows.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No seats available\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:rows.map(row=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 text-center font-medium text-gray-700\",children:row}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-1\",children:groupedSeats[row].map((seat,index)=>{// Add gap in the middle for aisle\nconst showAisle=index===Math.floor(groupedSeats[row].length/2);return/*#__PURE__*/_jsxs(React.Fragment,{children:[showAisle&&/*#__PURE__*/_jsx(\"div\",{className:\"w-4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSeatClick(seat),disabled:!seat.isAvailable||seat.isBlocked&&!reservedSeats.includes(seat.id),className:\"\\n                                    w-8 h-8 rounded border text-xs font-medium transition-all duration-200\\n                                    \".concat(getSeatStatusClass(seat),\"\\n                                    \").concat(!seat.isAvailable||seat.isBlocked&&!reservedSeats.includes(seat.id)?'':'cursor-pointer transform hover:scale-105',\"\\n                                  \"),title:\"\".concat(seat.displayName||seat.seatRow+seat.seatNumber,\" - \").concat(seat.seatType,\" - \\u20B9\").concat(seat.price||0),children:seat.seatNumber})]},seat.id);})})]},row))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-50 p-4 rounded-lg border border-purple-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-purple-800\",children:\"Premium\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-purple-600\",children:[\"\\u20B9\",getSeatPrice('PREMIUM')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-blue-800\",children:\"Standard\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-600\",children:[\"\\u20B9\",getSeatPrice('STANDARD')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-800\",children:\"Economy\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u20B9\",getSeatPrice('ECONOMY')]})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6 sticky top-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Booking Summary\"}),selectedSeats.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-6\",children:[/*#__PURE__*/_jsx(InformationCircleIcon,{className:\"h-12 w-12 text-gray-400 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm\",children:\"Select seats to continue\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-gray-800 mb-2\",children:[\"Selected Seats (\",selectedSeats.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:selectedSeats.map(seat=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[seat.seatNumber,\" (\",seat.seatType,\")\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",getSeatPrice(seat.seatType)]})]},seat.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t pt-4 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-semibold\",children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-bold text-green-600 flex items-center\",children:[/*#__PURE__*/_jsx(CurrencyRupeeIcon,{className:\"h-5 w-5\"}),calculateTotal()]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleProceedToPayment,disabled:reservingSeats||selectedSeats.length===0,className:\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:reservingSeats?'Reserving Seats...':'Proceed to Payment'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedSeats([]);setReservedSeats([]);},className:\"w-full text-gray-600 py-2 text-sm hover:text-gray-800\",children:\"Clear Selection\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 p-3 bg-yellow-50 rounded-lg border border-yellow-200\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-yellow-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:\"}),\" Selected seats are temporarily reserved for you. Complete booking within 10 minutes or seats will be released.\"]})})]})})]})})]});};export default SeatSelection;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useLocation","CalendarIcon","ClockIcon","MapPinIcon","CurrencyRupeeIcon","InformationCircleIcon","ChevronLeftIcon","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SeatSelection","_show$venue","showId","navigate","location","isAuthenticated","show","movie","state","seats","setSeats","selectedSeats","setSelectedSeats","reservedSeats","setReservedSeats","loading","setLoading","error","setError","reservingSeats","setReservingSeats","bookingSummary","setBookingSummary","showSummary","setShowSummary","API_BASE_URL","from","pathname","loadSeats","response","fetch","concat","ok","Error","seatsData","json","err","console","reserveTimeout","length","setTimeout","method","headers","localStorage","getItem","body","JSON","stringify","parseInt","seatIds","map","seat","id","reservationTimeMinutes","prev","clearTimeout","handleSeatClick","isAvailable","isBlocked","includes","isSelected","some","s","filter","alert","getSeatStatusClass","seatType","getSeatPrice","price","calculateTotal","reduce","total","getBookingSummary","join","summary","handleProceedToPayment","groupSeatsByRow","grouped","forEach","_seat$seatNumber","row","rowNumber","seatNumber","charAt","push","Object","keys","sort","a","b","_a$seatNumber","_b$seatNumber","aNum","slice","columnNumber","bNum","className","children","onClick","groupedSeats","rows","title","venue","name","Date","showDate","toLocaleDateString","showTime","index","showAisle","Math","floor","disabled","displayName","seatRow"],"sources":["C:/Users/P12C4F3/OneDrive - Dayforce HCM Inc/Desktop/Movie-1/frontend/src/components/booking/SeatSelection.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport { \r\n  CalendarIcon, \r\n  ClockIcon, \r\n  MapPinIcon, \r\n  CurrencyRupeeIcon,\r\n  InformationCircleIcon,\r\n  ChevronLeftIcon \r\n} from '@heroicons/react/24/outline';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\nconst SeatSelection = () => {\r\n  const { showId } = useParams();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { isAuthenticated } = useAuth();\r\n  \r\n  // Get show and movie data from navigation state\r\n  const { show, movie } = location.state || {};\r\n  \r\n  const [seats, setSeats] = useState([]);\r\n  const [selectedSeats, setSelectedSeats] = useState([]);\r\n  const [reservedSeats, setReservedSeats] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [reservingSeats, setReservingSeats] = useState(false);\r\n  const [bookingSummary, setBookingSummary] = useState(null);\r\n  const [showSummary, setShowSummary] = useState(false);\r\n\r\n  // API base URL\r\n  const API_BASE_URL = 'http://localhost:8080/api';\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate('/login', { state: { from: location.pathname } });\r\n      return;\r\n    }\r\n\r\n    loadSeats();\r\n  }, [showId, isAuthenticated, navigate, location]);\r\n\r\n  const loadSeats = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(`${API_BASE_URL}/booking/shows/${showId}/seats`);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch seats');\r\n      }\r\n      \r\n      const seatsData = await response.json();\r\n      setSeats(seatsData);\r\n    } catch (err) {\r\n      console.error('Error loading seats:', err);\r\n      setError('Failed to load seat layout');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate('/login', { state: { from: location.pathname } });\r\n      return;\r\n    }\r\n\r\n    loadSeats();\r\n  }, [showId, isAuthenticated, navigate, location]);\r\n\r\n  // Reserve seats when selection changes\r\n  useEffect(() => {\r\n    let reserveTimeout;\r\n    \r\n    if (selectedSeats.length > 0) {\r\n      setReservingSeats(true);\r\n      \r\n      // Reserve seats after 500ms delay to avoid too many API calls\r\n      reserveTimeout = setTimeout(async () => {\r\n        try {\r\n          const response = await fetch(`${API_BASE_URL}/booking/seats/reserve`, {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': `Bearer ${localStorage.getItem('authToken')}`\r\n            },\r\n            body: JSON.stringify({\r\n              showId: parseInt(showId),\r\n              seatIds: selectedSeats.map(seat => seat.id),\r\n              reservationTimeMinutes: 10\r\n            })\r\n          });\r\n          \r\n          if (response.ok) {\r\n            setReservedSeats(prev => [...prev, ...selectedSeats.map(seat => seat.id)]);\r\n          }\r\n        } catch (err) {\r\n          console.error('Error reserving seats:', err);\r\n        } finally {\r\n          setReservingSeats(false);\r\n        }\r\n      }, 500);\r\n    }\r\n\r\n    return () => {\r\n      if (reserveTimeout) {\r\n        clearTimeout(reserveTimeout);\r\n      }\r\n    };\r\n  }, [selectedSeats, showId]);\r\n\r\n  const handleSeatClick = (seat) => {\r\n    // Can't select unavailable or blocked seats (unless reserved by current user)\r\n    if (!seat.isAvailable || (seat.isBlocked && !reservedSeats.includes(seat.id))) {\r\n      return;\r\n    }\r\n\r\n    setSelectedSeats(prev => {\r\n      const isSelected = prev.some(s => s.id === seat.id);\r\n      if (isSelected) {\r\n        // Unselect seat\r\n        return prev.filter(s => s.id !== seat.id);\r\n      } else {\r\n        // Select seat (max 10 seats)\r\n        if (prev.length >= 10) {\r\n          alert('You can select maximum 10 seats at a time');\r\n          return prev;\r\n        }\r\n        return [...prev, seat];\r\n      }\r\n    });\r\n  };\r\n\r\n  const getSeatStatusClass = (seat) => {\r\n    const isSelected = selectedSeats.some(s => s.id === seat.id);\r\n    \r\n    if (!seat.isAvailable) {\r\n      return 'bg-red-500 cursor-not-allowed';\r\n    }\r\n    \r\n    if (seat.isBlocked && !reservedSeats.includes(seat.id)) {\r\n      return 'bg-orange-400 cursor-not-allowed';\r\n    }\r\n    \r\n    if (isSelected) {\r\n      return 'bg-green-500 text-white';\r\n    }\r\n    \r\n    // Available seat - color by type\r\n    switch (seat.seatType) {\r\n      case 'PREMIUM':\r\n        return 'bg-purple-200 hover:bg-purple-300 border-purple-400';\r\n      case 'STANDARD':\r\n        return 'bg-blue-200 hover:bg-blue-300 border-blue-400';\r\n      case 'ECONOMY':\r\n        return 'bg-gray-200 hover:bg-gray-300 border-gray-400';\r\n      default:\r\n        return 'bg-gray-200 hover:bg-gray-300 border-gray-400';\r\n    }\r\n  };\r\n\r\n  const getSeatPrice = (seatType) => {\r\n    switch (seatType) {\r\n      case 'PREMIUM': return (show?.price || 250) + 100;\r\n      case 'STANDARD': return show?.price || 250;\r\n      case 'ECONOMY': return (show?.price || 250) - 50;\r\n      default: return show?.price || 250;\r\n    }\r\n  };\r\n\r\n  const calculateTotal = () => {\r\n    return selectedSeats.reduce((total, seat) => {\r\n      return total + (seat.price || 0);\r\n    }, 0);\r\n  };\r\n\r\n  const getBookingSummary = async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/booking/summary?showId=${showId}&seatIds=${selectedSeats.map(s => s.id).join(',')}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const summary = await response.json();\r\n        return summary;\r\n      }\r\n    } catch (err) {\r\n      console.error('Error getting booking summary:', err);\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const handleProceedToPayment = async () => {\r\n    if (selectedSeats.length === 0) {\r\n      alert('Please select at least one seat');\r\n      return;\r\n    }\r\n\r\n    const summary = await getBookingSummary();\r\n    \r\n    navigate('/payment', {\r\n      state: {\r\n        show,\r\n        movie,\r\n        selectedSeats,\r\n        bookingSummary: summary,\r\n        showId: parseInt(showId),\r\n        seatIds: selectedSeats.map(s => s.id),\r\n        from: location.pathname\r\n      }\r\n    });\r\n  };\r\n\r\n  // Group seats by row\r\n  const groupSeatsByRow = (seats) => {\r\n    const grouped = {};\r\n    seats.forEach(seat => {\r\n      const row = seat.rowNumber || seat.seatNumber?.charAt(0) || 'A';\r\n      if (!grouped[row]) {\r\n        grouped[row] = [];\r\n      }\r\n      grouped[row].push(seat);\r\n    });\r\n    \r\n    // Sort seats within each row\r\n    Object.keys(grouped).forEach(row => {\r\n      grouped[row].sort((a, b) => {\r\n        const aNum = parseInt(a.seatNumber?.slice(1) || a.columnNumber || 1);\r\n        const bNum = parseInt(b.seatNumber?.slice(1) || b.columnNumber || 1);\r\n        return aNum - bNum;\r\n      });\r\n    });\r\n    \r\n    return grouped;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">Loading seat layout...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !show) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-red-600 text-lg\">{error || 'Show data not available'}</p>\r\n          <button \r\n            onClick={() => navigate('/movies')}\r\n            className=\"mt-4 text-blue-600 hover:text-blue-800\"\r\n          >\r\n            Back to Movies\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const groupedSeats = groupSeatsByRow(seats);\r\n  const rows = Object.keys(groupedSeats).sort();\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Header */}\r\n      <div className=\"bg-white shadow-sm\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <button\r\n                onClick={() => navigate(-1)}\r\n                className=\"text-blue-600 hover:text-blue-800 mb-2\"\r\n              >\r\n                ← Back to Shows\r\n              </button>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">Select Seats</h1>\r\n              <div className=\"flex items-center space-x-4 text-sm text-gray-600 mt-1\">\r\n                <span className=\"flex items-center\">\r\n                  <span className=\"font-medium\">{movie?.title}</span>\r\n                </span>\r\n                <span className=\"flex items-center\">\r\n                  <MapPinIcon className=\"h-4 w-4 mr-1\" />\r\n                  {show.venue?.name}\r\n                </span>\r\n                <span className=\"flex items-center\">\r\n                  <CalendarIcon className=\"h-4 w-4 mr-1\" />\r\n                  {new Date(show.showDate).toLocaleDateString()}\r\n                </span>\r\n                <span className=\"flex items-center\">\r\n                  <ClockIcon className=\"h-4 w-4 mr-1\" />\r\n                  {show.showTime}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\r\n          {/* Seat Map */}\r\n          <div className=\"lg:col-span-3\">\r\n            <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n              {/* Screen */}\r\n              <div className=\"text-center mb-8\">\r\n                <div className=\"bg-gray-800 text-white py-2 px-8 rounded-full inline-block mb-2\">\r\n                  SCREEN\r\n                </div>\r\n                <p className=\"text-sm text-gray-500\">All eyes this way please!</p>\r\n              </div>\r\n\r\n              {/* Legend */}\r\n              <div className=\"flex flex-wrap justify-center space-x-6 mb-6 text-sm\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-gray-200 border border-gray-400 rounded\"></div>\r\n                  <span>Available</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-green-500 rounded\"></div>\r\n                  <span>Selected</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-red-500 rounded\"></div>\r\n                  <span>Booked</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-orange-400 rounded\"></div>\r\n                  <span>Reserved</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Seat Grid */}\r\n              <div className=\"max-w-4xl mx-auto\">\r\n                {rows.length === 0 ? (\r\n                  <div className=\"text-center py-8\">\r\n                    <p className=\"text-gray-500\">No seats available</p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-3\">\r\n                    {rows.map(row => (\r\n                      <div key={row} className=\"flex items-center justify-center space-x-1\">\r\n                        {/* Row Label */}\r\n                        <div className=\"w-8 text-center font-medium text-gray-700\">\r\n                          {row}\r\n                        </div>\r\n                        \r\n                        {/* Seats */}\r\n                        <div className=\"flex space-x-1\">\r\n                          {groupedSeats[row].map((seat, index) => {\r\n                            // Add gap in the middle for aisle\r\n                            const showAisle = index === Math.floor(groupedSeats[row].length / 2);\r\n                            \r\n                            return (\r\n                              <React.Fragment key={seat.id}>\r\n                                {showAisle && <div className=\"w-4\"></div>}\r\n                                <button\r\n                                  onClick={() => handleSeatClick(seat)}\r\n                                  disabled={!seat.isAvailable || (seat.isBlocked && !reservedSeats.includes(seat.id))}\r\n                                  className={`\r\n                                    w-8 h-8 rounded border text-xs font-medium transition-all duration-200\r\n                                    ${getSeatStatusClass(seat)}\r\n                                    ${!seat.isAvailable || (seat.isBlocked && !reservedSeats.includes(seat.id)) \r\n                                      ? '' : 'cursor-pointer transform hover:scale-105'\r\n                                    }\r\n                                  `}\r\n                                  title={`${seat.displayName || seat.seatRow + seat.seatNumber} - ${seat.seatType} - ₹${seat.price || 0}`}\r\n                                >\r\n                                  {seat.seatNumber}\r\n                                </button>\r\n                              </React.Fragment>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Seat Type Pricing */}\r\n              <div className=\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <div className=\"bg-purple-50 p-4 rounded-lg border border-purple-200\">\r\n                  <h4 className=\"font-medium text-purple-800\">Premium</h4>\r\n                  <p className=\"text-sm text-purple-600\">₹{getSeatPrice('PREMIUM')}</p>\r\n                </div>\r\n                <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\r\n                  <h4 className=\"font-medium text-blue-800\">Standard</h4>\r\n                  <p className=\"text-sm text-blue-600\">₹{getSeatPrice('STANDARD')}</p>\r\n                </div>\r\n                <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-200\">\r\n                  <h4 className=\"font-medium text-gray-800\">Economy</h4>\r\n                  <p className=\"text-sm text-gray-600\">₹{getSeatPrice('ECONOMY')}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Booking Summary */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-white rounded-lg shadow-sm p-6 sticky top-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Booking Summary</h3>\r\n              \r\n              {selectedSeats.length === 0 ? (\r\n                <div className=\"text-center py-6\">\r\n                  <InformationCircleIcon className=\"h-12 w-12 text-gray-400 mx-auto mb-2\" />\r\n                  <p className=\"text-gray-500 text-sm\">Select seats to continue</p>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  {/* Selected Seats */}\r\n                  <div className=\"mb-4\">\r\n                    <h4 className=\"font-medium text-gray-800 mb-2\">\r\n                      Selected Seats ({selectedSeats.length})\r\n                    </h4>\r\n                    <div className=\"space-y-2\">\r\n                      {selectedSeats.map(seat => (\r\n                        <div key={seat.id} className=\"flex justify-between text-sm\">\r\n                          <span>{seat.seatNumber} ({seat.seatType})</span>\r\n                          <span>₹{getSeatPrice(seat.seatType)}</span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Total */}\r\n                  <div className=\"border-t pt-4 mb-6\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                      <span className=\"text-lg font-semibold\">Total</span>\r\n                      <span className=\"text-xl font-bold text-green-600 flex items-center\">\r\n                        <CurrencyRupeeIcon className=\"h-5 w-5\" />\r\n                        {calculateTotal()}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Action Buttons */}\r\n                  <div className=\"space-y-3\">\r\n                    <button\r\n                      onClick={handleProceedToPayment}\r\n                      disabled={reservingSeats || selectedSeats.length === 0}\r\n                      className=\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                    >\r\n                      {reservingSeats ? 'Reserving Seats...' : 'Proceed to Payment'}\r\n                    </button>\r\n                    \r\n                    <button\r\n                      onClick={() => {\r\n                        setSelectedSeats([]);\r\n                        setReservedSeats([]);\r\n                      }}\r\n                      className=\"w-full text-gray-600 py-2 text-sm hover:text-gray-800\"\r\n                    >\r\n                      Clear Selection\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {/* Important Notes */}\r\n              <div className=\"mt-6 p-3 bg-yellow-50 rounded-lg border border-yellow-200\">\r\n                <p className=\"text-xs text-yellow-800\">\r\n                  <strong>Note:</strong> Selected seats are temporarily reserved for you. \r\n                  Complete booking within 10 minutes or seats will be released.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SeatSelection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}