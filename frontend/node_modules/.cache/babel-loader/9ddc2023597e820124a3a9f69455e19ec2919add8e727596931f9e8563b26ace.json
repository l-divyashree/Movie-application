{"ast":null,"code":"import _objectSpread from\"C:/Users/P12C4F3/OneDrive - Dayforce HCM Inc/Desktop/Movie-1/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../../contexts/AuthContext';import bookingService from'../../services/bookingService';import paymentService from'../../services/paymentService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const InvoicesTickets=()=>{const{user}=useAuth();const navigate=useNavigate();const[activeTab,setActiveTab]=useState('invoices');const[invoices,setInvoices]=useState([]);const[tickets,setTickets]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[filterPeriod,setFilterPeriod]=useState('all');const[selectedInvoice,setSelectedInvoice]=useState(null);const[showInvoiceModal,setShowInvoiceModal]=useState(false);const[showResendModal,setShowResendModal]=useState(false);useEffect(()=>{loadData();},[]);const loadData=async()=>{try{setLoading(true);// Load invoices and tickets using services\nconst[invoicesData,ticketsData]=await Promise.all([paymentService.getInvoices(),bookingService.getUserTickets()]);setInvoices(invoicesData.invoices||[]);setTickets(ticketsData.tickets||[]);}catch(error){console.error('Error loading data:',error);// Set empty arrays as fallback\nsetInvoices([]);setTickets([]);}finally{setLoading(false);}};const getFilteredData=()=>{const data=activeTab==='invoices'?invoices:tickets;let filtered=data;// Filter by search term\nif(searchTerm){filtered=filtered.filter(item=>{var _item$movie;return item.bookingReference.toLowerCase().includes(searchTerm.toLowerCase())||((_item$movie=item.movie)===null||_item$movie===void 0?void 0:_item$movie.title.toLowerCase().includes(searchTerm.toLowerCase()))||activeTab==='invoices'&&item.invoiceNumber.toLowerCase().includes(searchTerm.toLowerCase());});}// Filter by period\nif(filterPeriod!=='all'){const now=new Date();const days={'30':30,'90':90,'365':365};const cutoffDate=new Date(now.getTime()-days[filterPeriod]*24*60*60*1000);filtered=filtered.filter(item=>new Date(item.date||item.showDateTime)>=cutoffDate);}return filtered;};const downloadPDF=function(item){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'invoice';// Mock PDF generation\nconst content=type==='invoice'?generateInvoicePDF(item):generateTicketPDF(item);const blob=new Blob([content],{type:'text/plain'});const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"\".concat(type,\"-\").concat(item.bookingReference,\".txt\");document.body.appendChild(a);a.click();window.URL.revokeObjectURL(url);document.body.removeChild(a);};const generateInvoicePDF=invoice=>{return\"\\nMOVIE BOOKING INVOICE\\nInvoice #: \".concat(invoice.invoiceNumber,\"\\nDate: \").concat(new Date(invoice.date).toLocaleDateString(),\"\\n\\nCUSTOMER INFORMATION:\\n\").concat(invoice.customerInfo.name,\"\\n\").concat(invoice.customerInfo.email,\"\\n\").concat(invoice.customerInfo.phone,\"\\n\").concat(invoice.customerInfo.address,\"\\n\\nBOOKING DETAILS:\\nBooking Reference: \").concat(invoice.bookingReference,\"\\nMovie: \").concat(invoice.movie.title,\"\\nVenue: \").concat(invoice.venue.name,\"\\nScreen: \").concat(invoice.venue.screen,\"\\nShow Date & Time: \").concat(new Date(invoice.showDateTime).toLocaleString(),\"\\n\\nSEATS:\\n\").concat(invoice.seats.map(seat=>\"\".concat(seat.seatNumber,\" (\").concat(seat.type,\") - $\").concat(seat.price.toFixed(2))).join('\\n'),\"\\n\\nCONCESSIONS:\\n\").concat(invoice.concessions.map(item=>\"\".concat(item.quantity,\"x \").concat(item.item,\" - $\").concat(item.totalPrice.toFixed(2))).join('\\n'),\"\\n\\nFEES:\\n\").concat(invoice.fees.map(fee=>\"\".concat(fee.name,\" - $\").concat(fee.amount.toFixed(2))).join('\\n'),\"\\n\\nPAYMENT SUMMARY:\\nSubtotal: $\").concat(invoice.subtotal.toFixed(2),\"\\nTax: $\").concat(invoice.taxAmount.toFixed(2),\"\\nTotal: $\").concat(invoice.totalAmount.toFixed(2),\"\\nPayment Method: \").concat(invoice.paymentMethod,\"\\nStatus: \").concat(invoice.status.toUpperCase(),\"\\n\\nThank you for choosing our service!\\n    \");};const generateTicketPDF=ticket=>{return\"\\nE-TICKET\\nBooking Reference: \".concat(ticket.bookingReference,\"\\n\\nMovie: \").concat(ticket.movie.title,\"\\nVenue: \").concat(ticket.venue.name,\"\\nScreen: \").concat(ticket.venue.screen,\"\\nDate & Time: \").concat(new Date(ticket.showDateTime).toLocaleString(),\"\\nSeats: \").concat(ticket.seats.join(', '),\"\\n\\nQR Code: \").concat(ticket.qrCode,\"\\n\\nPlease present this ticket and valid ID at the theater.\\n    \");};const resendTicket=async(ticket,method)=>{try{setLoading(true);await bookingService.resendTicket(ticket.id,method);setTickets(prev=>prev.map(t=>t.id===ticket.id?_objectSpread(_objectSpread({},t),{},{[method==='email'?'emailSent':'smsSent']:true}):t));alert(\"Ticket resent via \".concat(method,\" successfully!\"));setShowResendModal(false);}catch(error){console.error(\"Error resending ticket via \".concat(method,\":\"),error);alert(\"Failed to resend ticket via \".concat(method));}finally{setLoading(false);}};const printTicket=ticket=>{const printWindow=window.open('','_blank');printWindow.document.write(\"\\n      <html>\\n        <head>\\n          <title>Movie Ticket - \".concat(ticket.bookingReference,\"</title>\\n          <style>\\n            body { font-family: Arial, sans-serif; padding: 20px; }\\n            .ticket { border: 2px solid #000; padding: 20px; max-width: 400px; }\\n            .qr-code { text-align: center; margin: 20px 0; }\\n          </style>\\n        </head>\\n        <body>\\n          <div class=\\\"ticket\\\">\\n            <h2>E-TICKET</h2>\\n            <p><strong>Booking:</strong> \").concat(ticket.bookingReference,\"</p>\\n            <p><strong>Movie:</strong> \").concat(ticket.movie.title,\"</p>\\n            <p><strong>Venue:</strong> \").concat(ticket.venue.name,\"</p>\\n            <p><strong>Screen:</strong> \").concat(ticket.venue.screen,\"</p>\\n            <p><strong>Date & Time:</strong> \").concat(new Date(ticket.showDateTime).toLocaleString(),\"</p>\\n            <p><strong>Seats:</strong> \").concat(ticket.seats.join(', '),\"</p>\\n            <div class=\\\"qr-code\\\">\\n              <p><strong>QR Code:</strong> \").concat(ticket.qrCode,\"</p>\\n            </div>\\n            <p><small>Please present this ticket and valid ID at the theater.</small></p>\\n          </div>\\n        </body>\\n      </html>\\n    \"));printWindow.document.close();printWindow.print();// Update print count\nsetTickets(prev=>prev.map(t=>t.id===ticket.id?_objectSpread(_objectSpread({},t),{},{printCount:t.printCount+1}):t));};const getStatusColor=status=>{switch(status){case'paid':case'active':return'bg-green-100 text-green-800';case'pending':return'bg-yellow-100 text-yellow-800';case'failed':case'cancelled':return'bg-red-100 text-red-800';case'used':return'bg-gray-100 text-gray-800';default:return'bg-gray-100 text-gray-800';}};const filteredData=getFilteredData();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6 mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Invoices & Tickets\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"Download invoices and manage your tickets\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/user/dashboard'),className:\"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors\",children:\"\\u2190 Back to Dashboard\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center px-6 py-4\",children:[/*#__PURE__*/_jsx(\"nav\",{className:\"flex space-x-8\",children:[{id:'invoices',label:'Invoices',icon:'📄'},{id:'tickets',label:'E-Tickets',icon:'🎫'}].map(tab=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(tab.id),className:\"py-2 px-1 border-b-2 font-medium text-sm transition-colors flex items-center space-x-2 \".concat(activeTab===tab.id?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(\"span\",{children:tab.icon}),/*#__PURE__*/_jsx(\"span\",{children:tab.label})]},tab.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search \".concat(activeTab,\"...\"),value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"}),/*#__PURE__*/_jsxs(\"select\",{value:filterPeriod,onChange:e=>setFilterPeriod(e.target.value),className:\"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Time\"}),/*#__PURE__*/_jsx(\"option\",{value:\"30\",children:\"Last 30 Days\"}),/*#__PURE__*/_jsx(\"option\",{value:\"90\",children:\"Last 3 Months\"}),/*#__PURE__*/_jsx(\"option\",{value:\"365\",children:\"Last Year\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[activeTab==='invoices'&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:filteredData.map(invoice=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-6 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-between mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-2\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:[\"Invoice #\",invoice.invoiceNumber]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs font-medium rounded-full \".concat(getStatusColor(invoice.status)),children:invoice.status.toUpperCase()})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-1\",children:invoice.movie.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:invoice.venue.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Booking ID:\"}),\" \",invoice.bookingReference]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Date:\"}),\" \",new Date(invoice.date).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Amount:\"}),\" $\",invoice.totalAmount.toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Payment:\"}),\" \",invoice.paymentMethod]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-3 pt-4 border-t\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadPDF(invoice,'invoice'),className:\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors\",children:\"\\uD83D\\uDCE5 Download PDF\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedInvoice(invoice);setShowInvoiceModal(true);},className:\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors\",children:\"\\uD83D\\uDC41\\uFE0F View Details\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>resendTicket(invoice,'email'),className:\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors\",children:\"\\uD83D\\uDCE7 Email Invoice\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>printTicket(invoice),className:\"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors\",children:\"\\uD83D\\uDDA8\\uFE0F Print\"})]})]},invoice.id))})}),activeTab==='tickets'&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:filteredData.map(ticket=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-6 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-4 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-20 bg-gray-300 rounded flex items-center justify-center flex-shrink-0\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 text-xs\",children:\"IMG\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:ticket.movie.title}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs font-medium rounded-full \".concat(getStatusColor(ticket.status)),children:ticket.status.toUpperCase()})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:ticket.venue.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mb-2\",children:[new Date(ticket.showDateTime).toLocaleDateString(),\" \\u2022 \",ticket.venue.screen]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900\",children:[\"Seats: \",ticket.seats.join(', ')]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"QR Code: \",ticket.qrCode]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500\",children:[\"#\",ticket.bookingReference]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex space-x-4 text-xs text-gray-500\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDCE7 \",ticket.emailSent?'Sent':'Not sent']}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDCF1 \",ticket.smsSent?'Sent':'Not sent']}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDDA8\\uFE0F Printed \",ticket.printCount,\" times\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadPDF(ticket,'ticket'),className:\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-3 rounded text-sm font-medium transition-colors\",children:\"\\uD83D\\uDCE5 Download\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>printTicket(ticket),className:\"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 px-3 rounded text-sm font-medium transition-colors\",children:\"\\uD83D\\uDDA8\\uFE0F Print\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>resendTicket(ticket,'email'),className:\"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-3 rounded text-sm font-medium transition-colors\",children:\"\\uD83D\\uDCE7 Resend Email\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>resendTicket(ticket,'sms'),className:\"flex-1 bg-yellow-600 hover:bg-yellow-700 text-white py-2 px-3 rounded text-sm font-medium transition-colors\",children:\"\\uD83D\\uDCF1 Resend SMS\"})]})]},ticket.id))})}),filteredData.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-6xl mb-4\",children:activeTab==='invoices'?'📄':'🎫'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-lg mb-2\",children:[\"No \",activeTab,\" found\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm mb-6\",children:activeTab==='invoices'?'Your invoices will appear here after booking movies':'Your e-tickets will appear here after booking movies'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/movies'),className:\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors\",children:\"Browse Movies\"})]})]})]}),showInvoiceModal&&selectedInvoice&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-8 w-full max-w-2xl mx-4 max-h-96 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:[\"Invoice Details - \",selectedInvoice.invoiceNumber]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowInvoiceModal(false),className:\"text-gray-400 hover:text-gray-600\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Customer Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{children:selectedInvoice.customerInfo.name}),/*#__PURE__*/_jsx(\"p\",{children:selectedInvoice.customerInfo.email}),/*#__PURE__*/_jsx(\"p\",{children:selectedInvoice.customerInfo.phone})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Booking Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 space-y-1\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Reference: \",selectedInvoice.bookingReference]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Date: \",new Date(selectedInvoice.date).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",selectedInvoice.status.toUpperCase()]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Movie Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"p\",{children:selectedInvoice.movie.title}),/*#__PURE__*/_jsxs(\"p\",{children:[selectedInvoice.venue.name,\" - \",selectedInvoice.venue.screen]}),/*#__PURE__*/_jsx(\"p\",{children:new Date(selectedInvoice.showDateTime).toLocaleString()})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Payment Summary\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[selectedInvoice.seats.map((seat,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[seat.seatNumber,\" (\",seat.type,\")\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",seat.price.toFixed(2)]})]},index)),selectedInvoice.concessions.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[item.quantity,\"x \",item.item]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",item.totalPrice.toFixed(2)]})]},index)),selectedInvoice.fees.map((fee,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:fee.name}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",fee.amount.toFixed(2)]})]},index)),/*#__PURE__*/_jsx(\"hr\",{className:\"my-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Subtotal:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",selectedInvoice.subtotal.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Tax:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",selectedInvoice.taxAmount.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between font-semibold\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",selectedInvoice.totalAmount.toFixed(2)]})]})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadPDF(selectedInvoice,'invoice'),className:\"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors\",children:\"\\uD83D\\uDCE5 Download PDF\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowInvoiceModal(false),className:\"bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg font-medium transition-colors\",children:\"Close\"})]})]})})]})});};export default InvoicesTickets;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useAuth","bookingService","paymentService","jsx","_jsx","jsxs","_jsxs","InvoicesTickets","user","navigate","activeTab","setActiveTab","invoices","setInvoices","tickets","setTickets","loading","setLoading","searchTerm","setSearchTerm","filterPeriod","setFilterPeriod","selectedInvoice","setSelectedInvoice","showInvoiceModal","setShowInvoiceModal","showResendModal","setShowResendModal","loadData","invoicesData","ticketsData","Promise","all","getInvoices","getUserTickets","error","console","getFilteredData","data","filtered","filter","item","_item$movie","bookingReference","toLowerCase","includes","movie","title","invoiceNumber","now","Date","days","cutoffDate","getTime","date","showDateTime","downloadPDF","type","arguments","length","undefined","content","generateInvoicePDF","generateTicketPDF","blob","Blob","url","window","URL","createObjectURL","a","document","createElement","href","download","concat","body","appendChild","click","revokeObjectURL","removeChild","invoice","toLocaleDateString","customerInfo","name","email","phone","address","venue","screen","toLocaleString","seats","map","seat","seatNumber","price","toFixed","join","concessions","quantity","totalPrice","fees","fee","amount","subtotal","taxAmount","totalAmount","paymentMethod","status","toUpperCase","ticket","qrCode","resendTicket","method","id","prev","t","_objectSpread","alert","printTicket","printWindow","open","write","close","print","printCount","getStatusColor","filteredData","className","children","onClick","label","icon","tab","placeholder","value","onChange","e","target","emailSent","smsSent","index"],"sources":["C:/Users/P12C4F3/OneDrive - Dayforce HCM Inc/Desktop/Movie-1/frontend/src/pages/user/InvoicesTickets.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport bookingService from '../../services/bookingService';\r\nimport paymentService from '../../services/paymentService';\r\n\r\nconst InvoicesTickets = () => {\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [activeTab, setActiveTab] = useState('invoices');\r\n  const [invoices, setInvoices] = useState([]);\r\n  const [tickets, setTickets] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterPeriod, setFilterPeriod] = useState('all');\r\n  const [selectedInvoice, setSelectedInvoice] = useState(null);\r\n  const [showInvoiceModal, setShowInvoiceModal] = useState(false);\r\n  const [showResendModal, setShowResendModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Load invoices and tickets using services\r\n      const [invoicesData, ticketsData] = await Promise.all([\r\n        paymentService.getInvoices(),\r\n        bookingService.getUserTickets()\r\n      ]);\r\n      \r\n      setInvoices(invoicesData.invoices || []);\r\n      setTickets(ticketsData.tickets || []);\r\n\r\n    } catch (error) {\r\n      console.error('Error loading data:', error);\r\n      // Set empty arrays as fallback\r\n      setInvoices([]);\r\n      setTickets([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getFilteredData = () => {\r\n    const data = activeTab === 'invoices' ? invoices : tickets;\r\n    let filtered = data;\r\n\r\n    // Filter by search term\r\n    if (searchTerm) {\r\n      filtered = filtered.filter(item => \r\n        item.bookingReference.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        item.movie?.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        (activeTab === 'invoices' && item.invoiceNumber.toLowerCase().includes(searchTerm.toLowerCase()))\r\n      );\r\n    }\r\n\r\n    // Filter by period\r\n    if (filterPeriod !== 'all') {\r\n      const now = new Date();\r\n      const days = {\r\n        '30': 30,\r\n        '90': 90,\r\n        '365': 365\r\n      };\r\n      \r\n      const cutoffDate = new Date(now.getTime() - (days[filterPeriod] * 24 * 60 * 60 * 1000));\r\n      filtered = filtered.filter(item => new Date(item.date || item.showDateTime) >= cutoffDate);\r\n    }\r\n\r\n    return filtered;\r\n  };\r\n\r\n  const downloadPDF = (item, type = 'invoice') => {\r\n    // Mock PDF generation\r\n    const content = type === 'invoice' ? generateInvoicePDF(item) : generateTicketPDF(item);\r\n    const blob = new Blob([content], { type: 'text/plain' });\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `${type}-${item.bookingReference}.txt`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    window.URL.revokeObjectURL(url);\r\n    document.body.removeChild(a);\r\n  };\r\n\r\n  const generateInvoicePDF = (invoice) => {\r\n    return `\r\nMOVIE BOOKING INVOICE\r\nInvoice #: ${invoice.invoiceNumber}\r\nDate: ${new Date(invoice.date).toLocaleDateString()}\r\n\r\nCUSTOMER INFORMATION:\r\n${invoice.customerInfo.name}\r\n${invoice.customerInfo.email}\r\n${invoice.customerInfo.phone}\r\n${invoice.customerInfo.address}\r\n\r\nBOOKING DETAILS:\r\nBooking Reference: ${invoice.bookingReference}\r\nMovie: ${invoice.movie.title}\r\nVenue: ${invoice.venue.name}\r\nScreen: ${invoice.venue.screen}\r\nShow Date & Time: ${new Date(invoice.showDateTime).toLocaleString()}\r\n\r\nSEATS:\r\n${invoice.seats.map(seat => `${seat.seatNumber} (${seat.type}) - $${seat.price.toFixed(2)}`).join('\\n')}\r\n\r\nCONCESSIONS:\r\n${invoice.concessions.map(item => `${item.quantity}x ${item.item} - $${item.totalPrice.toFixed(2)}`).join('\\n')}\r\n\r\nFEES:\r\n${invoice.fees.map(fee => `${fee.name} - $${fee.amount.toFixed(2)}`).join('\\n')}\r\n\r\nPAYMENT SUMMARY:\r\nSubtotal: $${invoice.subtotal.toFixed(2)}\r\nTax: $${invoice.taxAmount.toFixed(2)}\r\nTotal: $${invoice.totalAmount.toFixed(2)}\r\nPayment Method: ${invoice.paymentMethod}\r\nStatus: ${invoice.status.toUpperCase()}\r\n\r\nThank you for choosing our service!\r\n    `;\r\n  };\r\n\r\n  const generateTicketPDF = (ticket) => {\r\n    return `\r\nE-TICKET\r\nBooking Reference: ${ticket.bookingReference}\r\n\r\nMovie: ${ticket.movie.title}\r\nVenue: ${ticket.venue.name}\r\nScreen: ${ticket.venue.screen}\r\nDate & Time: ${new Date(ticket.showDateTime).toLocaleString()}\r\nSeats: ${ticket.seats.join(', ')}\r\n\r\nQR Code: ${ticket.qrCode}\r\n\r\nPlease present this ticket and valid ID at the theater.\r\n    `;\r\n  };\r\n\r\n  const resendTicket = async (ticket, method) => {\r\n    try {\r\n      setLoading(true);\r\n      await bookingService.resendTicket(ticket.id, method);\r\n      \r\n      setTickets(prev => prev.map(t => \r\n        t.id === ticket.id \r\n          ? { ...t, [method === 'email' ? 'emailSent' : 'smsSent']: true }\r\n          : t\r\n      ));\r\n      \r\n      alert(`Ticket resent via ${method} successfully!`);\r\n      setShowResendModal(false);\r\n    } catch (error) {\r\n      console.error(`Error resending ticket via ${method}:`, error);\r\n      alert(`Failed to resend ticket via ${method}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const printTicket = (ticket) => {\r\n    const printWindow = window.open('', '_blank');\r\n    printWindow.document.write(`\r\n      <html>\r\n        <head>\r\n          <title>Movie Ticket - ${ticket.bookingReference}</title>\r\n          <style>\r\n            body { font-family: Arial, sans-serif; padding: 20px; }\r\n            .ticket { border: 2px solid #000; padding: 20px; max-width: 400px; }\r\n            .qr-code { text-align: center; margin: 20px 0; }\r\n          </style>\r\n        </head>\r\n        <body>\r\n          <div class=\"ticket\">\r\n            <h2>E-TICKET</h2>\r\n            <p><strong>Booking:</strong> ${ticket.bookingReference}</p>\r\n            <p><strong>Movie:</strong> ${ticket.movie.title}</p>\r\n            <p><strong>Venue:</strong> ${ticket.venue.name}</p>\r\n            <p><strong>Screen:</strong> ${ticket.venue.screen}</p>\r\n            <p><strong>Date & Time:</strong> ${new Date(ticket.showDateTime).toLocaleString()}</p>\r\n            <p><strong>Seats:</strong> ${ticket.seats.join(', ')}</p>\r\n            <div class=\"qr-code\">\r\n              <p><strong>QR Code:</strong> ${ticket.qrCode}</p>\r\n            </div>\r\n            <p><small>Please present this ticket and valid ID at the theater.</small></p>\r\n          </div>\r\n        </body>\r\n      </html>\r\n    `);\r\n    printWindow.document.close();\r\n    printWindow.print();\r\n    \r\n    // Update print count\r\n    setTickets(prev => prev.map(t => \r\n      t.id === ticket.id \r\n        ? { ...t, printCount: t.printCount + 1 }\r\n        : t\r\n    ));\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'paid': case 'active': return 'bg-green-100 text-green-800';\r\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\r\n      case 'failed': case 'cancelled': return 'bg-red-100 text-red-800';\r\n      case 'used': return 'bg-gray-100 text-gray-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const filteredData = getFilteredData();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        {/* Header */}\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6 mb-8\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-gray-900\">Invoices & Tickets</h1>\r\n              <p className=\"text-gray-600 mt-2\">Download invoices and manage your tickets</p>\r\n            </div>\r\n            <button\r\n              onClick={() => navigate('/user/dashboard')}\r\n              className=\"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors\"\r\n            >\r\n              ← Back to Dashboard\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Navigation Tabs */}\r\n        <div className=\"bg-white rounded-lg shadow-sm mb-8\">\r\n          <div className=\"border-b border-gray-200\">\r\n            <div className=\"flex justify-between items-center px-6 py-4\">\r\n              <nav className=\"flex space-x-8\">\r\n                {[\r\n                  { id: 'invoices', label: 'Invoices', icon: '📄' },\r\n                  { id: 'tickets', label: 'E-Tickets', icon: '🎫' }\r\n                ].map(tab => (\r\n                  <button\r\n                    key={tab.id}\r\n                    onClick={() => setActiveTab(tab.id)}\r\n                    className={`py-2 px-1 border-b-2 font-medium text-sm transition-colors flex items-center space-x-2 ${\r\n                      activeTab === tab.id\r\n                        ? 'border-blue-500 text-blue-600'\r\n                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                    }`}\r\n                  >\r\n                    <span>{tab.icon}</span>\r\n                    <span>{tab.label}</span>\r\n                  </button>\r\n                ))}\r\n              </nav>\r\n\r\n              <div className=\"flex space-x-4\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder={`Search ${activeTab}...`}\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n                <select\r\n                  value={filterPeriod}\r\n                  onChange={(e) => setFilterPeriod(e.target.value)}\r\n                  className=\"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"all\">All Time</option>\r\n                  <option value=\"30\">Last 30 Days</option>\r\n                  <option value=\"90\">Last 3 Months</option>\r\n                  <option value=\"365\">Last Year</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"p-6\">\r\n            {/* Invoices Tab */}\r\n            {activeTab === 'invoices' && (\r\n              <div>\r\n                <div className=\"space-y-6\">\r\n                  {filteredData.map((invoice) => (\r\n                    <div key={invoice.id} className=\"border rounded-lg p-6 hover:shadow-md transition-shadow\">\r\n                      <div className=\"flex items-start justify-between mb-4\">\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex items-center space-x-3 mb-2\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                              Invoice #{invoice.invoiceNumber}\r\n                            </h3>\r\n                            <span className={`px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(invoice.status)}`}>\r\n                              {invoice.status.toUpperCase()}\r\n                            </span>\r\n                          </div>\r\n                          <p className=\"text-gray-600 mb-1\">{invoice.movie.title}</p>\r\n                          <p className=\"text-sm text-gray-500\">{invoice.venue.name}</p>\r\n                          <div className=\"mt-2 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600\">\r\n                            <div>\r\n                              <span className=\"font-medium\">Booking ID:</span> {invoice.bookingReference}\r\n                            </div>\r\n                            <div>\r\n                              <span className=\"font-medium\">Date:</span> {new Date(invoice.date).toLocaleDateString()}\r\n                            </div>\r\n                            <div>\r\n                              <span className=\"font-medium\">Amount:</span> ${invoice.totalAmount.toFixed(2)}\r\n                            </div>\r\n                            <div>\r\n                              <span className=\"font-medium\">Payment:</span> {invoice.paymentMethod}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex flex-wrap gap-3 pt-4 border-t\">\r\n                        <button\r\n                          onClick={() => downloadPDF(invoice, 'invoice')}\r\n                          className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors\"\r\n                        >\r\n                          📥 Download PDF\r\n                        </button>\r\n                        <button\r\n                          onClick={() => {\r\n                            setSelectedInvoice(invoice);\r\n                            setShowInvoiceModal(true);\r\n                          }}\r\n                          className=\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors\"\r\n                        >\r\n                          👁️ View Details\r\n                        </button>\r\n                        <button\r\n                          onClick={() => resendTicket(invoice, 'email')}\r\n                          className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors\"\r\n                        >\r\n                          📧 Email Invoice\r\n                        </button>\r\n                        <button\r\n                          onClick={() => printTicket(invoice)}\r\n                          className=\"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors\"\r\n                        >\r\n                          🖨️ Print\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Tickets Tab */}\r\n            {activeTab === 'tickets' && (\r\n              <div>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                  {filteredData.map((ticket) => (\r\n                    <div key={ticket.id} className=\"border rounded-lg p-6 hover:shadow-md transition-shadow\">\r\n                      <div className=\"flex items-start space-x-4 mb-4\">\r\n                        <div className=\"w-16 h-20 bg-gray-300 rounded flex items-center justify-center flex-shrink-0\">\r\n                          <span className=\"text-gray-600 text-xs\">IMG</span>\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex items-center space-x-2 mb-1\">\r\n                            <h3 className=\"font-semibold text-gray-900\">{ticket.movie.title}</h3>\r\n                            <span className={`px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(ticket.status)}`}>\r\n                              {ticket.status.toUpperCase()}\r\n                            </span>\r\n                          </div>\r\n                          <p className=\"text-sm text-gray-600 mb-1\">{ticket.venue.name}</p>\r\n                          <p className=\"text-xs text-gray-500 mb-2\">\r\n                            {new Date(ticket.showDateTime).toLocaleDateString()} • {ticket.venue.screen}\r\n                          </p>\r\n                          <p className=\"text-sm font-medium text-gray-900\">\r\n                            Seats: {ticket.seats.join(', ')}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"mb-4 p-3 bg-gray-50 rounded-lg\">\r\n                        <div className=\"flex items-center justify-between text-sm\">\r\n                          <span>QR Code: {ticket.qrCode}</span>\r\n                          <span className=\"text-gray-500\">#{ticket.bookingReference}</span>\r\n                        </div>\r\n                        <div className=\"mt-2 flex space-x-4 text-xs text-gray-500\">\r\n                          <span>📧 {ticket.emailSent ? 'Sent' : 'Not sent'}</span>\r\n                          <span>📱 {ticket.smsSent ? 'Sent' : 'Not sent'}</span>\r\n                          <span>🖨️ Printed {ticket.printCount} times</span>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex flex-wrap gap-2\">\r\n                        <button\r\n                          onClick={() => downloadPDF(ticket, 'ticket')}\r\n                          className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-3 rounded text-sm font-medium transition-colors\"\r\n                        >\r\n                          📥 Download\r\n                        </button>\r\n                        <button\r\n                          onClick={() => printTicket(ticket)}\r\n                          className=\"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 px-3 rounded text-sm font-medium transition-colors\"\r\n                        >\r\n                          🖨️ Print\r\n                        </button>\r\n                      </div>\r\n\r\n                      <div className=\"flex space-x-2 mt-2\">\r\n                        <button\r\n                          onClick={() => resendTicket(ticket, 'email')}\r\n                          className=\"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-3 rounded text-sm font-medium transition-colors\"\r\n                        >\r\n                          📧 Resend Email\r\n                        </button>\r\n                        <button\r\n                          onClick={() => resendTicket(ticket, 'sms')}\r\n                          className=\"flex-1 bg-yellow-600 hover:bg-yellow-700 text-white py-2 px-3 rounded text-sm font-medium transition-colors\"\r\n                        >\r\n                          📱 Resend SMS\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* No Data State */}\r\n            {filteredData.length === 0 && (\r\n              <div className=\"text-center py-12\">\r\n                <div className=\"text-gray-400 text-6xl mb-4\">\r\n                  {activeTab === 'invoices' ? '📄' : '🎫'}\r\n                </div>\r\n                <p className=\"text-gray-500 text-lg mb-2\">\r\n                  No {activeTab} found\r\n                </p>\r\n                <p className=\"text-gray-400 text-sm mb-6\">\r\n                  {activeTab === 'invoices' \r\n                    ? 'Your invoices will appear here after booking movies'\r\n                    : 'Your e-tickets will appear here after booking movies'\r\n                  }\r\n                </p>\r\n                <button\r\n                  onClick={() => navigate('/movies')}\r\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors\"\r\n                >\r\n                  Browse Movies\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Invoice Details Modal */}\r\n        {showInvoiceModal && selectedInvoice && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n            <div className=\"bg-white rounded-lg p-8 w-full max-w-2xl mx-4 max-h-96 overflow-y-auto\">\r\n              <div className=\"flex justify-between items-center mb-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                  Invoice Details - {selectedInvoice.invoiceNumber}\r\n                </h3>\r\n                <button\r\n                  onClick={() => setShowInvoiceModal(false)}\r\n                  className=\"text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  ✕\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"space-y-6\">\r\n                <div className=\"grid grid-cols-2 gap-6\">\r\n                  <div>\r\n                    <h4 className=\"font-medium text-gray-900 mb-2\">Customer Information</h4>\r\n                    <div className=\"text-sm text-gray-600 space-y-1\">\r\n                      <p>{selectedInvoice.customerInfo.name}</p>\r\n                      <p>{selectedInvoice.customerInfo.email}</p>\r\n                      <p>{selectedInvoice.customerInfo.phone}</p>\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <h4 className=\"font-medium text-gray-900 mb-2\">Booking Details</h4>\r\n                    <div className=\"text-sm text-gray-600 space-y-1\">\r\n                      <p>Reference: {selectedInvoice.bookingReference}</p>\r\n                      <p>Date: {new Date(selectedInvoice.date).toLocaleDateString()}</p>\r\n                      <p>Status: {selectedInvoice.status.toUpperCase()}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <h4 className=\"font-medium text-gray-900 mb-2\">Movie Details</h4>\r\n                  <div className=\"text-sm text-gray-600\">\r\n                    <p>{selectedInvoice.movie.title}</p>\r\n                    <p>{selectedInvoice.venue.name} - {selectedInvoice.venue.screen}</p>\r\n                    <p>{new Date(selectedInvoice.showDateTime).toLocaleString()}</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <h4 className=\"font-medium text-gray-900 mb-2\">Payment Summary</h4>\r\n                  <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                    <div className=\"space-y-2 text-sm\">\r\n                      {selectedInvoice.seats.map((seat, index) => (\r\n                        <div key={index} className=\"flex justify-between\">\r\n                          <span>{seat.seatNumber} ({seat.type})</span>\r\n                          <span>${seat.price.toFixed(2)}</span>\r\n                        </div>\r\n                      ))}\r\n                      {selectedInvoice.concessions.map((item, index) => (\r\n                        <div key={index} className=\"flex justify-between\">\r\n                          <span>{item.quantity}x {item.item}</span>\r\n                          <span>${item.totalPrice.toFixed(2)}</span>\r\n                        </div>\r\n                      ))}\r\n                      {selectedInvoice.fees.map((fee, index) => (\r\n                        <div key={index} className=\"flex justify-between\">\r\n                          <span>{fee.name}</span>\r\n                          <span>${fee.amount.toFixed(2)}</span>\r\n                        </div>\r\n                      ))}\r\n                      <hr className=\"my-2\" />\r\n                      <div className=\"flex justify-between\">\r\n                        <span>Subtotal:</span>\r\n                        <span>${selectedInvoice.subtotal.toFixed(2)}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span>Tax:</span>\r\n                        <span>${selectedInvoice.taxAmount.toFixed(2)}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between font-semibold\">\r\n                        <span>Total:</span>\r\n                        <span>${selectedInvoice.totalAmount.toFixed(2)}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex space-x-3 mt-6\">\r\n                <button\r\n                  onClick={() => downloadPDF(selectedInvoice, 'invoice')}\r\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors\"\r\n                >\r\n                  📥 Download PDF\r\n                </button>\r\n                <button\r\n                  onClick={() => setShowInvoiceModal(false)}\r\n                  className=\"bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg font-medium transition-colors\"\r\n                >\r\n                  Close\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InvoicesTickets;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}