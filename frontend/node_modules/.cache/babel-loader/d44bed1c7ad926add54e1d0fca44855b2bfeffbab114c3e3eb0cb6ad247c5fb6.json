{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{jsxs as _jsxs}from\"react/jsx-runtime\";const AnimatedCounter=_ref=>{let{endValue,duration=1500,prefix='',suffix='',formatter=null}=_ref;const[currentValue,setCurrentValue]=useState(0);const elRef=useRef(null);const rafRef=useRef(null);const idRef=useRef(\"counter-\".concat(Math.random().toString(36).slice(2,9)));// Normalize endValue to a finite number\nconst parseEndValue=v=>{if(typeof v==='number'&&Number.isFinite(v))return v;if(typeof v==='string'){// strip commas or non-numeric characters except dot and minus\nconst cleaned=v.replace(/,/g,'').trim();const n=Number(cleaned);return Number.isFinite(n)?n:0;}const n=Number(v);return Number.isFinite(n)?n:0;};useEffect(()=>{const node=elRef.current;if(!node)return;const observer=new IntersectionObserver(_ref2=>{let[entry]=_ref2;if(entry.isIntersecting){// kick off animation by toggling a data attribute so the other effect runs\nnode.dataset.visible='1';}},{threshold:0.1});observer.observe(node);return()=>{observer.disconnect();};},[]);useEffect(()=>{const node=elRef.current;if(!node)return;if(node.dataset.visible!=='1')return;let startTime=null;const startValue=0;const endVal=parseEndValue(endValue);const animate=time=>{if(!startTime)startTime=time;const elapsed=time-startTime;const progress=Math.min(elapsed/duration,1);const easeOut=1-Math.pow(1-progress,3);const value=Math.floor(startValue+(endVal-startValue)*easeOut);setCurrentValue(value);if(progress<1){rafRef.current=requestAnimationFrame(animate);}};// start animation\nrafRef.current=requestAnimationFrame(animate);return()=>{if(rafRef.current){cancelAnimationFrame(rafRef.current);}};},[endValue,duration]);const formatValue=value=>{const normalized=Number.isFinite(value)?value:0;if(formatter)return formatter(normalized);try{return normalized.toLocaleString();}catch(e){return String(normalized);}};return/*#__PURE__*/_jsxs(\"span\",{id:idRef.current,ref:elRef,className:\"inline-block\",style:{fontVariantNumeric:'tabular-nums',transition:'color var(--transition-fast)'},children:[prefix,formatValue(currentValue),suffix]});};export default AnimatedCounter;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxs","_jsxs","AnimatedCounter","_ref","endValue","duration","prefix","suffix","formatter","currentValue","setCurrentValue","elRef","rafRef","idRef","concat","Math","random","toString","slice","parseEndValue","v","Number","isFinite","cleaned","replace","trim","n","node","current","observer","IntersectionObserver","_ref2","entry","isIntersecting","dataset","visible","threshold","observe","disconnect","startTime","startValue","endVal","animate","time","elapsed","progress","min","easeOut","pow","value","floor","requestAnimationFrame","cancelAnimationFrame","formatValue","normalized","toLocaleString","e","String","id","ref","className","style","fontVariantNumeric","transition","children"],"sources":["C:/Users/P12C4F3/OneDrive - Dayforce HCM Inc/Desktop/Movie-1/frontend/src/components/common/AnimatedCounter.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\n\r\nconst AnimatedCounter = ({\r\n  endValue,\r\n  duration = 1500,\r\n  prefix = '',\r\n  suffix = '',\r\n  formatter = null\r\n}) => {\r\n  const [currentValue, setCurrentValue] = useState(0);\r\n  const elRef = useRef(null);\r\n  const rafRef = useRef(null);\r\n  const idRef = useRef(`counter-${Math.random().toString(36).slice(2, 9)}`);\r\n\r\n  // Normalize endValue to a finite number\r\n  const parseEndValue = (v) => {\r\n    if (typeof v === 'number' && Number.isFinite(v)) return v;\r\n    if (typeof v === 'string') {\r\n      // strip commas or non-numeric characters except dot and minus\r\n      const cleaned = v.replace(/,/g, '').trim();\r\n      const n = Number(cleaned);\r\n      return Number.isFinite(n) ? n : 0;\r\n    }\r\n    const n = Number(v);\r\n    return Number.isFinite(n) ? n : 0;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const node = elRef.current;\r\n    if (!node) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting) {\r\n          // kick off animation by toggling a data attribute so the other effect runs\r\n          node.dataset.visible = '1';\r\n        }\r\n      },\r\n      { threshold: 0.1 }\r\n    );\r\n\r\n    observer.observe(node);\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const node = elRef.current;\r\n    if (!node) return;\r\n    if (node.dataset.visible !== '1') return;\r\n\r\n    let startTime = null;\r\n    const startValue = 0;\r\n    const endVal = parseEndValue(endValue);\r\n\r\n    const animate = (time) => {\r\n      if (!startTime) startTime = time;\r\n      const elapsed = time - startTime;\r\n      const progress = Math.min(elapsed / duration, 1);\r\n      const easeOut = 1 - Math.pow(1 - progress, 3);\r\n      const value = Math.floor(startValue + (endVal - startValue) * easeOut);\r\n      setCurrentValue(value);\r\n\r\n      if (progress < 1) {\r\n        rafRef.current = requestAnimationFrame(animate);\r\n      }\r\n    };\r\n\r\n    // start animation\r\n    rafRef.current = requestAnimationFrame(animate);\r\n\r\n    return () => {\r\n      if (rafRef.current) {\r\n        cancelAnimationFrame(rafRef.current);\r\n      }\r\n    };\r\n  }, [endValue, duration]);\r\n\r\n  const formatValue = (value) => {\r\n    const normalized = Number.isFinite(value) ? value : 0;\r\n    if (formatter) return formatter(normalized);\r\n    try {\r\n      return normalized.toLocaleString();\r\n    } catch (e) {\r\n      return String(normalized);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <span\r\n      id={idRef.current}\r\n      ref={elRef}\r\n      className=\"inline-block\"\r\n      style={{\r\n        fontVariantNumeric: 'tabular-nums',\r\n        transition: 'color var(--transition-fast)'\r\n      }}\r\n    >\r\n      {prefix}{formatValue(currentValue)}{suffix}\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default AnimatedCounter;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}