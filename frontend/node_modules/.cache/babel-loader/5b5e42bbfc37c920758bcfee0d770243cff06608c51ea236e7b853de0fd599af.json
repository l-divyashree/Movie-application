{"ast":null,"code":"import _objectSpread from\"C:/Users/P12C4F3/OneDrive - Dayforce HCM Inc/Desktop/Movie-1/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate,useLocation}from'react-router-dom';import{CalendarIcon,ClockIcon,MapPinIcon,CurrencyRupeeIcon,InformationCircleIcon,ChevronLeftIcon}from'@heroicons/react/24/outline';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SeatSelection=()=>{var _show$venue2;const{showId}=useParams();const navigate=useNavigate();const location=useLocation();const{isAuthenticated}=useAuth();// Get show and movie data from navigation state\nconst{show,movie}=location.state||{};const[seats,setSeats]=useState([]);const[selectedSeats,setSelectedSeats]=useState([]);const[reservedSeats,setReservedSeats]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[reservingSeats,setReservingSeats]=useState(false);const[bookingSummary,setBookingSummary]=useState(null);const[showSummary,setShowSummary]=useState(false);// API base URL\nconst API_BASE_URL='http://localhost:8080/api';useEffect(()=>{if(!isAuthenticated){navigate('/login',{state:{from:location.pathname}});return;}loadSeats();},[showId,isAuthenticated,navigate,location]);const loadSeats=async()=>{try{setLoading(true);const response=await fetch(\"\".concat(API_BASE_URL,\"/seats/show/\").concat(showId));if(!response.ok){throw new Error('Failed to fetch seats');}const seatsData=await response.json();setSeats(seatsData);}catch(err){console.error('Error loading seats:',err);setError('Failed to load seat layout');}finally{setLoading(false);}};useEffect(()=>{if(!isAuthenticated){navigate('/login',{state:{from:location.pathname}});return;}loadSeats();},[showId,isAuthenticated,navigate,location]);// Reserve seats when selection changes\nuseEffect(()=>{let reserveTimeout;if(selectedSeats.length>0){setReservingSeats(true);// Reserve seats after 500ms delay to avoid too many API calls\nreserveTimeout=setTimeout(async()=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/booking/seats/reserve\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('authToken'))},body:JSON.stringify({showId:parseInt(showId),seatIds:selectedSeats.map(seat=>seat.id),reservationTimeMinutes:10})});if(response.ok){setReservedSeats(prev=>[...prev,...selectedSeats.map(seat=>seat.id)]);}}catch(err){console.error('Error reserving seats:',err);}finally{setReservingSeats(false);}},500);}return()=>{if(reserveTimeout){clearTimeout(reserveTimeout);}};},[selectedSeats,showId]);const handleSeatClick=seat=>{// Can't select unavailable or blocked seats (unless reserved by current user)\nif(!seat.isAvailable||seat.isBlocked&&!reservedSeats.includes(seat.id)){return;}setSelectedSeats(prev=>{const isSelected=prev.some(s=>s.id===seat.id);if(isSelected){// Unselect seat\nreturn prev.filter(s=>s.id!==seat.id);}else{// Select seat (max 10 seats)\nif(prev.length>=10){alert('You can select maximum 10 seats at a time');return prev;}return[...prev,seat];}});};const getSeatStatusClass=seat=>{const isSelected=selectedSeats.some(s=>s.id===seat.id);if(!seat.isAvailable){return'bg-red-500 cursor-not-allowed';}if(seat.isBlocked&&!reservedSeats.includes(seat.id)){return'bg-orange-400 cursor-not-allowed';}if(isSelected){return'bg-green-500 text-white';}// Available seat - color by type\nswitch(seat.seatType){case'PREMIUM':return'bg-purple-200 hover:bg-purple-300 border-purple-400';case'STANDARD':return'bg-blue-200 hover:bg-blue-300 border-blue-400';case'ECONOMY':return'bg-gray-200 hover:bg-gray-300 border-gray-400';default:return'bg-gray-200 hover:bg-gray-300 border-gray-400';}};const getSeatPrice=seatType=>{switch(seatType){case'PREMIUM':return((show===null||show===void 0?void 0:show.price)||250)+100;case'STANDARD':return(show===null||show===void 0?void 0:show.price)||250;case'ECONOMY':return((show===null||show===void 0?void 0:show.price)||250)-50;default:return(show===null||show===void 0?void 0:show.price)||250;}};const calculateTotal=()=>{return selectedSeats.reduce((total,seat)=>{return total+(seat.price||0);},0);};const getBookingSummary=async()=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/booking/summary?showId=\").concat(showId,\"&seatIds=\").concat(selectedSeats.map(s=>s.id).join(',')),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('authToken'))}});if(response.ok){const summary=await response.json();return summary;}}catch(err){console.error('Error getting booking summary:',err);}return null;};const handleBookNow=async()=>{if(selectedSeats.length===0){alert('Please select at least one seat');return;}try{var _show$venue;setReservingSeats(true);const token=localStorage.getItem('token');if(!token){alert('Please login to book tickets');navigate('/login');return;}// Create a simple booking object for demonstration\nconst bookingData={showId:parseInt(showId),movieTitle:(movie===null||movie===void 0?void 0:movie.title)||'Unknown Movie',venueName:(show===null||show===void 0?void 0:(_show$venue=show.venue)===null||_show$venue===void 0?void 0:_show$venue.name)||'Unknown Venue',showDate:(show===null||show===void 0?void 0:show.showDate)||new Date().toISOString().split('T')[0],showTime:(show===null||show===void 0?void 0:show.showTime)||'Unknown Time',seats:selectedSeats.map(seat=>({id:seat.id,seatNumber:seat.displayName||\"\".concat(seat.seatRow).concat(seat.seatNumber),price:seat.price,type:seat.seatType})),totalAmount:selectedSeats.reduce((total,seat)=>total+(seat.price||0),0),bookingDate:new Date().toISOString(),status:'CONFIRMED'};// Store in localStorage for admin dashboard demo\nconst existingBookings=JSON.parse(localStorage.getItem('demoBookings')||'[]');const currentUser=JSON.parse(localStorage.getItem('user')||'{}');console.log('SeatSelection - Current User when creating booking:',currentUser);const newBooking=_objectSpread(_objectSpread({},bookingData),{},{id:Date.now(),// Simple ID generation\nuserId:currentUser.id,userEmail:currentUser.email,userFirstName:currentUser.firstName||'Demo',userLastName:currentUser.lastName||'User'});console.log('SeatSelection - New booking being created:',newBooking);existingBookings.push(newBooking);localStorage.setItem('demoBookings',JSON.stringify(existingBookings));console.log('SeatSelection - All bookings after adding new one:',existingBookings);// Dispatch custom event to notify other components\nwindow.dispatchEvent(new CustomEvent('bookingCreated',{detail:newBooking}));// Show success message\nalert(\"Booking confirmed! \\nMovie: \".concat(bookingData.movieTitle,\"\\nVenue: \").concat(bookingData.venueName,\"\\nDate: \").concat(bookingData.showDate,\" at \").concat(bookingData.showTime,\"\\nSeats: \").concat(bookingData.seats.map(s=>s.seatNumber).join(', '),\"\\nTotal: \\u20B9\").concat(bookingData.totalAmount));// Navigate to user bookings page\nnavigate('/user/bookings');}catch(error){console.error('Booking error:',error);alert(\"Booking failed: \".concat(error.message));}finally{setReservingSeats(false);}};// Group seats by row\nconst groupSeatsByRow=seats=>{const grouped={};seats.forEach(seat=>{// Use seatRow directly since our API provides it as a separate field\nconst row=seat.seatRow||seat.rowNumber||'A';if(!grouped[row]){grouped[row]=[];}grouped[row].push(seat);});// Sort seats within each row by seatNumber\nObject.keys(grouped).forEach(row=>{grouped[row].sort((a,b)=>{// seatNumber is already a number from our API\nconst aNum=a.seatNumber||a.columnNumber||1;const bNum=b.seatNumber||b.columnNumber||1;return aNum-bNum;});});return grouped;};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading seat layout...\"})]})});}if(error||!show){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 text-lg\",children:error||'Show data not available'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/movies'),className:\"mt-4 text-blue-600 hover:text-blue-800\",children:\"Back to Movies\"})]})});}const groupedSeats=groupSeatsByRow(seats);const rows=Object.keys(groupedSeats).sort();return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),className:\"text-blue-600 hover:text-blue-800 mb-2\",children:\"\\u2190 Back to Shows\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Select Seats\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-sm text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:movie===null||movie===void 0?void 0:movie.title})}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(MapPinIcon,{className:\"h-4 w-4 mr-1\"}),(_show$venue2=show.venue)===null||_show$venue2===void 0?void 0:_show$venue2.name]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-4 w-4 mr-1\"}),new Date(show.showDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-4 w-4 mr-1\"}),show.showTime]})]})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-4 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-800 text-white py-2 px-8 rounded-full inline-block mb-2\",children:\"SCREEN\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"All eyes this way please!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-center space-x-6 mb-6 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-gray-200 border border-gray-400 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Available\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-green-500 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Selected\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-red-500 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Booked\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-orange-400 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Reserved\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto\",children:rows.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No seats available\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:rows.map(row=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 text-center font-medium text-gray-700\",children:row}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-1\",children:groupedSeats[row].map((seat,index)=>{// Add gap in the middle for aisle\nconst showAisle=index===Math.floor(groupedSeats[row].length/2);return/*#__PURE__*/_jsxs(React.Fragment,{children:[showAisle&&/*#__PURE__*/_jsx(\"div\",{className:\"w-4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSeatClick(seat),disabled:!seat.isAvailable||seat.isBlocked&&!reservedSeats.includes(seat.id),className:\"\\n                                    w-8 h-8 rounded border text-xs font-medium transition-all duration-200\\n                                    \".concat(getSeatStatusClass(seat),\"\\n                                    \").concat(!seat.isAvailable||seat.isBlocked&&!reservedSeats.includes(seat.id)?'':'cursor-pointer transform hover:scale-105',\"\\n                                  \"),title:\"\".concat(seat.displayName||seat.seatRow+seat.seatNumber,\" - \").concat(seat.seatType,\" - \\u20B9\").concat(seat.price||0),children:seat.seatNumber})]},seat.id);})})]},row))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-50 p-4 rounded-lg border border-purple-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-purple-800\",children:\"Premium\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-purple-600\",children:[\"\\u20B9\",getSeatPrice('PREMIUM')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-blue-800\",children:\"Standard\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-600\",children:[\"\\u20B9\",getSeatPrice('STANDARD')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-800\",children:\"Economy\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u20B9\",getSeatPrice('ECONOMY')]})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6 sticky top-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Booking Summary\"}),selectedSeats.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-6\",children:[/*#__PURE__*/_jsx(InformationCircleIcon,{className:\"h-12 w-12 text-gray-400 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm\",children:\"Select seats to continue\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-gray-800 mb-2\",children:[\"Selected Seats (\",selectedSeats.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:selectedSeats.map(seat=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[seat.seatNumber,\" (\",seat.seatType,\")\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",getSeatPrice(seat.seatType)]})]},seat.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t pt-4 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-semibold\",children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-bold text-green-600 flex items-center\",children:[/*#__PURE__*/_jsx(CurrencyRupeeIcon,{className:\"h-5 w-5\"}),calculateTotal()]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleBookNow,disabled:reservingSeats||selectedSeats.length===0,className:\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:reservingSeats?'Booking Tickets...':'Book Now'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedSeats([]);setReservedSeats([]);},className:\"w-full text-gray-600 py-2 text-sm hover:text-gray-800\",children:\"Clear Selection\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 p-3 bg-yellow-50 rounded-lg border border-yellow-200\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-yellow-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:\"}),\" Selected seats are temporarily reserved for you. Complete booking within 10 minutes or seats will be released.\"]})})]})})]})})]});};export default SeatSelection;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useLocation","CalendarIcon","ClockIcon","MapPinIcon","CurrencyRupeeIcon","InformationCircleIcon","ChevronLeftIcon","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SeatSelection","_show$venue2","showId","navigate","location","isAuthenticated","show","movie","state","seats","setSeats","selectedSeats","setSelectedSeats","reservedSeats","setReservedSeats","loading","setLoading","error","setError","reservingSeats","setReservingSeats","bookingSummary","setBookingSummary","showSummary","setShowSummary","API_BASE_URL","from","pathname","loadSeats","response","fetch","concat","ok","Error","seatsData","json","err","console","reserveTimeout","length","setTimeout","method","headers","localStorage","getItem","body","JSON","stringify","parseInt","seatIds","map","seat","id","reservationTimeMinutes","prev","clearTimeout","handleSeatClick","isAvailable","isBlocked","includes","isSelected","some","s","filter","alert","getSeatStatusClass","seatType","getSeatPrice","price","calculateTotal","reduce","total","getBookingSummary","join","summary","handleBookNow","_show$venue","token","bookingData","movieTitle","title","venueName","venue","name","showDate","Date","toISOString","split","showTime","seatNumber","displayName","seatRow","type","totalAmount","bookingDate","status","existingBookings","parse","currentUser","log","newBooking","_objectSpread","now","userId","userEmail","email","userFirstName","firstName","userLastName","lastName","push","setItem","window","dispatchEvent","CustomEvent","detail","message","groupSeatsByRow","grouped","forEach","row","rowNumber","Object","keys","sort","a","b","aNum","columnNumber","bNum","className","children","onClick","groupedSeats","rows","toLocaleDateString","index","showAisle","Math","floor","disabled"],"sources":["C:/Users/P12C4F3/OneDrive - Dayforce HCM Inc/Desktop/Movie-1/frontend/src/components/booking/SeatSelection.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport { \r\n  CalendarIcon, \r\n  ClockIcon, \r\n  MapPinIcon, \r\n  CurrencyRupeeIcon,\r\n  InformationCircleIcon,\r\n  ChevronLeftIcon \r\n} from '@heroicons/react/24/outline';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\nconst SeatSelection = () => {\r\n  const { showId } = useParams();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { isAuthenticated } = useAuth();\r\n  \r\n  // Get show and movie data from navigation state\r\n  const { show, movie } = location.state || {};\r\n  \r\n  const [seats, setSeats] = useState([]);\r\n  const [selectedSeats, setSelectedSeats] = useState([]);\r\n  const [reservedSeats, setReservedSeats] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [reservingSeats, setReservingSeats] = useState(false);\r\n  const [bookingSummary, setBookingSummary] = useState(null);\r\n  const [showSummary, setShowSummary] = useState(false);\r\n\r\n  // API base URL\r\n  const API_BASE_URL = 'http://localhost:8080/api';\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate('/login', { state: { from: location.pathname } });\r\n      return;\r\n    }\r\n\r\n    loadSeats();\r\n  }, [showId, isAuthenticated, navigate, location]);\r\n\r\n  const loadSeats = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(`${API_BASE_URL}/seats/show/${showId}`);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch seats');\r\n      }\r\n      \r\n      const seatsData = await response.json();\r\n      setSeats(seatsData);\r\n    } catch (err) {\r\n      console.error('Error loading seats:', err);\r\n      setError('Failed to load seat layout');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate('/login', { state: { from: location.pathname } });\r\n      return;\r\n    }\r\n\r\n    loadSeats();\r\n  }, [showId, isAuthenticated, navigate, location]);\r\n\r\n  // Reserve seats when selection changes\r\n  useEffect(() => {\r\n    let reserveTimeout;\r\n    \r\n    if (selectedSeats.length > 0) {\r\n      setReservingSeats(true);\r\n      \r\n      // Reserve seats after 500ms delay to avoid too many API calls\r\n      reserveTimeout = setTimeout(async () => {\r\n        try {\r\n          const response = await fetch(`${API_BASE_URL}/booking/seats/reserve`, {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': `Bearer ${localStorage.getItem('authToken')}`\r\n            },\r\n            body: JSON.stringify({\r\n              showId: parseInt(showId),\r\n              seatIds: selectedSeats.map(seat => seat.id),\r\n              reservationTimeMinutes: 10\r\n            })\r\n          });\r\n          \r\n          if (response.ok) {\r\n            setReservedSeats(prev => [...prev, ...selectedSeats.map(seat => seat.id)]);\r\n          }\r\n        } catch (err) {\r\n          console.error('Error reserving seats:', err);\r\n        } finally {\r\n          setReservingSeats(false);\r\n        }\r\n      }, 500);\r\n    }\r\n\r\n    return () => {\r\n      if (reserveTimeout) {\r\n        clearTimeout(reserveTimeout);\r\n      }\r\n    };\r\n  }, [selectedSeats, showId]);\r\n\r\n  const handleSeatClick = (seat) => {\r\n    // Can't select unavailable or blocked seats (unless reserved by current user)\r\n    if (!seat.isAvailable || (seat.isBlocked && !reservedSeats.includes(seat.id))) {\r\n      return;\r\n    }\r\n\r\n    setSelectedSeats(prev => {\r\n      const isSelected = prev.some(s => s.id === seat.id);\r\n      if (isSelected) {\r\n        // Unselect seat\r\n        return prev.filter(s => s.id !== seat.id);\r\n      } else {\r\n        // Select seat (max 10 seats)\r\n        if (prev.length >= 10) {\r\n          alert('You can select maximum 10 seats at a time');\r\n          return prev;\r\n        }\r\n        return [...prev, seat];\r\n      }\r\n    });\r\n  };\r\n\r\n  const getSeatStatusClass = (seat) => {\r\n    const isSelected = selectedSeats.some(s => s.id === seat.id);\r\n    \r\n    if (!seat.isAvailable) {\r\n      return 'bg-red-500 cursor-not-allowed';\r\n    }\r\n    \r\n    if (seat.isBlocked && !reservedSeats.includes(seat.id)) {\r\n      return 'bg-orange-400 cursor-not-allowed';\r\n    }\r\n    \r\n    if (isSelected) {\r\n      return 'bg-green-500 text-white';\r\n    }\r\n    \r\n    // Available seat - color by type\r\n    switch (seat.seatType) {\r\n      case 'PREMIUM':\r\n        return 'bg-purple-200 hover:bg-purple-300 border-purple-400';\r\n      case 'STANDARD':\r\n        return 'bg-blue-200 hover:bg-blue-300 border-blue-400';\r\n      case 'ECONOMY':\r\n        return 'bg-gray-200 hover:bg-gray-300 border-gray-400';\r\n      default:\r\n        return 'bg-gray-200 hover:bg-gray-300 border-gray-400';\r\n    }\r\n  };\r\n\r\n  const getSeatPrice = (seatType) => {\r\n    switch (seatType) {\r\n      case 'PREMIUM': return (show?.price || 250) + 100;\r\n      case 'STANDARD': return show?.price || 250;\r\n      case 'ECONOMY': return (show?.price || 250) - 50;\r\n      default: return show?.price || 250;\r\n    }\r\n  };\r\n\r\n  const calculateTotal = () => {\r\n    return selectedSeats.reduce((total, seat) => {\r\n      return total + (seat.price || 0);\r\n    }, 0);\r\n  };\r\n\r\n  const getBookingSummary = async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/booking/summary?showId=${showId}&seatIds=${selectedSeats.map(s => s.id).join(',')}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const summary = await response.json();\r\n        return summary;\r\n      }\r\n    } catch (err) {\r\n      console.error('Error getting booking summary:', err);\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const handleBookNow = async () => {\r\n    if (selectedSeats.length === 0) {\r\n      alert('Please select at least one seat');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setReservingSeats(true);\r\n      \r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        alert('Please login to book tickets');\r\n        navigate('/login');\r\n        return;\r\n      }\r\n\r\n      // Create a simple booking object for demonstration\r\n      const bookingData = {\r\n        showId: parseInt(showId),\r\n        movieTitle: movie?.title || 'Unknown Movie',\r\n        venueName: show?.venue?.name || 'Unknown Venue',\r\n        showDate: show?.showDate || new Date().toISOString().split('T')[0],\r\n        showTime: show?.showTime || 'Unknown Time',\r\n        seats: selectedSeats.map(seat => ({\r\n          id: seat.id,\r\n          seatNumber: seat.displayName || `${seat.seatRow}${seat.seatNumber}`,\r\n          price: seat.price,\r\n          type: seat.seatType\r\n        })),\r\n        totalAmount: selectedSeats.reduce((total, seat) => total + (seat.price || 0), 0),\r\n        bookingDate: new Date().toISOString(),\r\n        status: 'CONFIRMED'\r\n      };\r\n\r\n      // Store in localStorage for admin dashboard demo\r\n      const existingBookings = JSON.parse(localStorage.getItem('demoBookings') || '[]');\r\n      const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\r\n      \r\n      console.log('SeatSelection - Current User when creating booking:', currentUser);\r\n      \r\n      const newBooking = {\r\n        ...bookingData,\r\n        id: Date.now(), // Simple ID generation\r\n        userId: currentUser.id,\r\n        userEmail: currentUser.email,\r\n        userFirstName: currentUser.firstName || 'Demo',\r\n        userLastName: currentUser.lastName || 'User'\r\n      };\r\n      \r\n      console.log('SeatSelection - New booking being created:', newBooking);\r\n      \r\n      existingBookings.push(newBooking);\r\n      localStorage.setItem('demoBookings', JSON.stringify(existingBookings));\r\n      \r\n      console.log('SeatSelection - All bookings after adding new one:', existingBookings);\r\n      \r\n      // Dispatch custom event to notify other components\r\n      window.dispatchEvent(new CustomEvent('bookingCreated', {\r\n        detail: newBooking\r\n      }));\r\n      \r\n      // Show success message\r\n      alert(`Booking confirmed! \r\nMovie: ${bookingData.movieTitle}\r\nVenue: ${bookingData.venueName}\r\nDate: ${bookingData.showDate} at ${bookingData.showTime}\r\nSeats: ${bookingData.seats.map(s => s.seatNumber).join(', ')}\r\nTotal: ₹${bookingData.totalAmount}`);\r\n      \r\n      // Navigate to user bookings page\r\n      navigate('/user/bookings');\r\n      \r\n    } catch (error) {\r\n      console.error('Booking error:', error);\r\n      alert(`Booking failed: ${error.message}`);\r\n    } finally {\r\n      setReservingSeats(false);\r\n    }\r\n  };\r\n\r\n  // Group seats by row\r\n  const groupSeatsByRow = (seats) => {\r\n    const grouped = {};\r\n    seats.forEach(seat => {\r\n      // Use seatRow directly since our API provides it as a separate field\r\n      const row = seat.seatRow || seat.rowNumber || 'A';\r\n      if (!grouped[row]) {\r\n        grouped[row] = [];\r\n      }\r\n      grouped[row].push(seat);\r\n    });\r\n    \r\n    // Sort seats within each row by seatNumber\r\n    Object.keys(grouped).forEach(row => {\r\n      grouped[row].sort((a, b) => {\r\n        // seatNumber is already a number from our API\r\n        const aNum = a.seatNumber || a.columnNumber || 1;\r\n        const bNum = b.seatNumber || b.columnNumber || 1;\r\n        return aNum - bNum;\r\n      });\r\n    });\r\n    \r\n    return grouped;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">Loading seat layout...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !show) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-red-600 text-lg\">{error || 'Show data not available'}</p>\r\n          <button \r\n            onClick={() => navigate('/movies')}\r\n            className=\"mt-4 text-blue-600 hover:text-blue-800\"\r\n          >\r\n            Back to Movies\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const groupedSeats = groupSeatsByRow(seats);\r\n  const rows = Object.keys(groupedSeats).sort();\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Header */}\r\n      <div className=\"bg-white shadow-sm\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <button\r\n                onClick={() => navigate(-1)}\r\n                className=\"text-blue-600 hover:text-blue-800 mb-2\"\r\n              >\r\n                ← Back to Shows\r\n              </button>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">Select Seats</h1>\r\n              <div className=\"flex items-center space-x-4 text-sm text-gray-600 mt-1\">\r\n                <span className=\"flex items-center\">\r\n                  <span className=\"font-medium\">{movie?.title}</span>\r\n                </span>\r\n                <span className=\"flex items-center\">\r\n                  <MapPinIcon className=\"h-4 w-4 mr-1\" />\r\n                  {show.venue?.name}\r\n                </span>\r\n                <span className=\"flex items-center\">\r\n                  <CalendarIcon className=\"h-4 w-4 mr-1\" />\r\n                  {new Date(show.showDate).toLocaleDateString()}\r\n                </span>\r\n                <span className=\"flex items-center\">\r\n                  <ClockIcon className=\"h-4 w-4 mr-1\" />\r\n                  {show.showTime}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\r\n          {/* Seat Map */}\r\n          <div className=\"lg:col-span-3\">\r\n            <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n              {/* Screen */}\r\n              <div className=\"text-center mb-8\">\r\n                <div className=\"bg-gray-800 text-white py-2 px-8 rounded-full inline-block mb-2\">\r\n                  SCREEN\r\n                </div>\r\n                <p className=\"text-sm text-gray-500\">All eyes this way please!</p>\r\n              </div>\r\n\r\n              {/* Legend */}\r\n              <div className=\"flex flex-wrap justify-center space-x-6 mb-6 text-sm\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-gray-200 border border-gray-400 rounded\"></div>\r\n                  <span>Available</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-green-500 rounded\"></div>\r\n                  <span>Selected</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-red-500 rounded\"></div>\r\n                  <span>Booked</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-orange-400 rounded\"></div>\r\n                  <span>Reserved</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Seat Grid */}\r\n              <div className=\"max-w-4xl mx-auto\">\r\n                {rows.length === 0 ? (\r\n                  <div className=\"text-center py-8\">\r\n                    <p className=\"text-gray-500\">No seats available</p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-3\">\r\n                    {rows.map(row => (\r\n                      <div key={row} className=\"flex items-center justify-center space-x-1\">\r\n                        {/* Row Label */}\r\n                        <div className=\"w-8 text-center font-medium text-gray-700\">\r\n                          {row}\r\n                        </div>\r\n                        \r\n                        {/* Seats */}\r\n                        <div className=\"flex space-x-1\">\r\n                          {groupedSeats[row].map((seat, index) => {\r\n                            // Add gap in the middle for aisle\r\n                            const showAisle = index === Math.floor(groupedSeats[row].length / 2);\r\n                            \r\n                            return (\r\n                              <React.Fragment key={seat.id}>\r\n                                {showAisle && <div className=\"w-4\"></div>}\r\n                                <button\r\n                                  onClick={() => handleSeatClick(seat)}\r\n                                  disabled={!seat.isAvailable || (seat.isBlocked && !reservedSeats.includes(seat.id))}\r\n                                  className={`\r\n                                    w-8 h-8 rounded border text-xs font-medium transition-all duration-200\r\n                                    ${getSeatStatusClass(seat)}\r\n                                    ${!seat.isAvailable || (seat.isBlocked && !reservedSeats.includes(seat.id)) \r\n                                      ? '' : 'cursor-pointer transform hover:scale-105'\r\n                                    }\r\n                                  `}\r\n                                  title={`${seat.displayName || seat.seatRow + seat.seatNumber} - ${seat.seatType} - ₹${seat.price || 0}`}\r\n                                >\r\n                                  {seat.seatNumber}\r\n                                </button>\r\n                              </React.Fragment>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Seat Type Pricing */}\r\n              <div className=\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <div className=\"bg-purple-50 p-4 rounded-lg border border-purple-200\">\r\n                  <h4 className=\"font-medium text-purple-800\">Premium</h4>\r\n                  <p className=\"text-sm text-purple-600\">₹{getSeatPrice('PREMIUM')}</p>\r\n                </div>\r\n                <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\r\n                  <h4 className=\"font-medium text-blue-800\">Standard</h4>\r\n                  <p className=\"text-sm text-blue-600\">₹{getSeatPrice('STANDARD')}</p>\r\n                </div>\r\n                <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-200\">\r\n                  <h4 className=\"font-medium text-gray-800\">Economy</h4>\r\n                  <p className=\"text-sm text-gray-600\">₹{getSeatPrice('ECONOMY')}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Booking Summary */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-white rounded-lg shadow-sm p-6 sticky top-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Booking Summary</h3>\r\n              \r\n              {selectedSeats.length === 0 ? (\r\n                <div className=\"text-center py-6\">\r\n                  <InformationCircleIcon className=\"h-12 w-12 text-gray-400 mx-auto mb-2\" />\r\n                  <p className=\"text-gray-500 text-sm\">Select seats to continue</p>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  {/* Selected Seats */}\r\n                  <div className=\"mb-4\">\r\n                    <h4 className=\"font-medium text-gray-800 mb-2\">\r\n                      Selected Seats ({selectedSeats.length})\r\n                    </h4>\r\n                    <div className=\"space-y-2\">\r\n                      {selectedSeats.map(seat => (\r\n                        <div key={seat.id} className=\"flex justify-between text-sm\">\r\n                          <span>{seat.seatNumber} ({seat.seatType})</span>\r\n                          <span>₹{getSeatPrice(seat.seatType)}</span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Total */}\r\n                  <div className=\"border-t pt-4 mb-6\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                      <span className=\"text-lg font-semibold\">Total</span>\r\n                      <span className=\"text-xl font-bold text-green-600 flex items-center\">\r\n                        <CurrencyRupeeIcon className=\"h-5 w-5\" />\r\n                        {calculateTotal()}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Action Buttons */}\r\n                  <div className=\"space-y-3\">\r\n                    <button\r\n                      onClick={handleBookNow}\r\n                      disabled={reservingSeats || selectedSeats.length === 0}\r\n                      className=\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                    >\r\n                      {reservingSeats ? 'Booking Tickets...' : 'Book Now'}\r\n                    </button>\r\n                    \r\n                    <button\r\n                      onClick={() => {\r\n                        setSelectedSeats([]);\r\n                        setReservedSeats([]);\r\n                      }}\r\n                      className=\"w-full text-gray-600 py-2 text-sm hover:text-gray-800\"\r\n                    >\r\n                      Clear Selection\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {/* Important Notes */}\r\n              <div className=\"mt-6 p-3 bg-yellow-50 rounded-lg border border-yellow-200\">\r\n                <p className=\"text-xs text-yellow-800\">\r\n                  <strong>Note:</strong> Selected seats are temporarily reserved for you. \r\n                  Complete booking within 10 minutes or seats will be released.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SeatSelection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}