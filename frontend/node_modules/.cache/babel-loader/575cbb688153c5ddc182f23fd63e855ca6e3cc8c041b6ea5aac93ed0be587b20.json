{"ast":null,"code":"import _objectSpread from\"C:/Users/P12C4F3/OneDrive - Dayforce HCM Inc/Desktop/Movie-1/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate,useLocation}from'react-router-dom';import{CalendarIcon,ClockIcon,MapPinIcon,CurrencyRupeeIcon,InformationCircleIcon,ChevronLeftIcon}from'@heroicons/react/24/outline';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SeatSelection=()=>{var _show$venue3;const{showId}=useParams();const navigate=useNavigate();const location=useLocation();const{isAuthenticated}=useAuth();// Get show and movie data from navigation state\nconst{show,movie}=location.state||{};const[seats,setSeats]=useState([]);const[selectedSeats,setSelectedSeats]=useState([]);const[reservedSeats,setReservedSeats]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[reservingSeats,setReservingSeats]=useState(false);const[bookingSummary,setBookingSummary]=useState(null);const[showSummary,setShowSummary]=useState(false);// API base URL\nconst API_BASE_URL='http://localhost:8080/api';useEffect(()=>{if(!isAuthenticated){navigate('/login',{state:{from:location.pathname}});return;}loadSeats();},[showId,isAuthenticated,navigate,location]);const loadSeats=async()=>{try{setLoading(true);// Try API first\nlet seatsData=[];try{const response=await fetch(\"\".concat(API_BASE_URL,\"/seats/show/\").concat(showId));if(response.ok){seatsData=await response.json();}else{console.warn('Seat API unavailable, falling back to admin-saved layout');}}catch(apiErr){console.warn('Seat API error, falling back to admin-saved layout',apiErr);}// If API didn't return seats, try admin saved layout in localStorage\nif(!seatsData||seatsData.length===0){var _show$venue;const adminLayouts=JSON.parse(localStorage.getItem('adminSeatLayouts')||'{}');const key=show!==null&&show!==void 0&&(_show$venue=show.venue)!==null&&_show$venue!==void 0&&_show$venue.id&&show!==null&&show!==void 0&&show.screenId?\"\".concat(show.venue.id,\":\").concat(show.screenId):null;if(key&&adminLayouts[key]){// Convert admin layout (rows of seats) into flat seats array expected by SeatSelection\nconst adminLayout=adminLayouts[key];seatsData=[];adminLayout.forEach(row=>{row.forEach(seat=>{seatsData.push({id:seat.id,seatRow:seat.rowLetter,seatNumber:seat.seatNumber,seatType:seat.type==='premium'?'PREMIUM':'STANDARD',isAvailable:seat.isAvailable,isAccessible:seat.isAccessible||false});});});}}setSeats(seatsData||[]);}catch(err){console.error('Error loading seats:',err);setError('Failed to load seat layout');}finally{setLoading(false);}};useEffect(()=>{if(!isAuthenticated){navigate('/login',{state:{from:location.pathname}});return;}loadSeats();},[showId,isAuthenticated,navigate,location]);// Reserve seats when selection changes\nuseEffect(()=>{let reserveTimeout;if(selectedSeats.length>0){setReservingSeats(true);// Reserve seats after 500ms delay to avoid too many API calls\nreserveTimeout=setTimeout(async()=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/booking/seats/reserve\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('authToken'))},body:JSON.stringify({showId:parseInt(showId),seatIds:selectedSeats.map(seat=>seat.id),reservationTimeMinutes:10})});if(response.ok){setReservedSeats(prev=>[...prev,...selectedSeats.map(seat=>seat.id)]);}}catch(err){console.error('Error reserving seats:',err);}finally{setReservingSeats(false);}},500);}return()=>{if(reserveTimeout){clearTimeout(reserveTimeout);}};},[selectedSeats,showId]);const handleSeatClick=seat=>{// Can't select unavailable or blocked seats (unless reserved by current user)\nif(!seat.isAvailable||seat.isBlocked&&!reservedSeats.includes(seat.id)){return;}setSelectedSeats(prev=>{const isSelected=prev.some(s=>s.id===seat.id);if(isSelected){// Unselect seat\nreturn prev.filter(s=>s.id!==seat.id);}else{// Select seat (max 10 seats)\nif(prev.length>=10){alert('You can select maximum 10 seats at a time');return prev;}return[...prev,seat];}});};const getSeatStatusClass=seat=>{const isSelected=selectedSeats.some(s=>s.id===seat.id);const demoBookings=JSON.parse(localStorage.getItem('demoBookings')||'[]');const userBookings=JSON.parse(localStorage.getItem('userBookings')||'[]');const allBookedSeatIds=new Set();[...demoBookings,...userBookings].forEach(bk=>{(bk.seats||[]).forEach(s=>allBookedSeatIds.add(s.id||s));});const isBooked=allBookedSeatIds.has(seat.id)||seat.status==='BOOKED'||seat.isBooked;if(isBooked){return'bg-red-500 cursor-not-allowed text-white';}if(!seat.isAvailable){return'bg-red-500 cursor-not-allowed';}if(seat.isBlocked&&!reservedSeats.includes(seat.id)){return'bg-orange-400 cursor-not-allowed';}if(isSelected){return'bg-green-500 text-white';}// Available seat - color by type\nswitch(seat.seatType){case'PREMIUM':return'bg-purple-200 hover:bg-purple-300 border-purple-400';case'STANDARD':return'bg-blue-200 hover:bg-blue-300 border-blue-400';case'ECONOMY':return'bg-gray-200 hover:bg-gray-300 border-gray-400';default:return'bg-gray-200 hover:bg-gray-300 border-gray-400';}};const getSeatPrice=seatType=>{switch(seatType){case'PREMIUM':return((show===null||show===void 0?void 0:show.price)||250)+100;case'STANDARD':return(show===null||show===void 0?void 0:show.price)||250;case'ECONOMY':return((show===null||show===void 0?void 0:show.price)||250)-50;default:return(show===null||show===void 0?void 0:show.price)||250;}};const calculateTotal=()=>{return selectedSeats.reduce((total,seat)=>{return total+(seat.price||0);},0);};const getBookingSummary=async()=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/booking/summary?showId=\").concat(showId,\"&seatIds=\").concat(selectedSeats.map(s=>s.id).join(',')),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('authToken'))}});if(response.ok){const summary=await response.json();return summary;}}catch(err){console.error('Error getting booking summary:',err);}return null;};const handleBookNow=async()=>{if(selectedSeats.length===0){alert('Please select at least one seat');return;}try{var _show$venue2;setReservingSeats(true);const token=localStorage.getItem('token');if(!token){alert('Please login to book tickets');navigate('/login');return;}// Create a simple booking object for demonstration\nconst bookingData={showId:parseInt(showId),movieTitle:(movie===null||movie===void 0?void 0:movie.title)||'Unknown Movie',venueName:(show===null||show===void 0?void 0:(_show$venue2=show.venue)===null||_show$venue2===void 0?void 0:_show$venue2.name)||'Unknown Venue',showDate:(show===null||show===void 0?void 0:show.showDate)||new Date().toISOString().split('T')[0],showTime:(show===null||show===void 0?void 0:show.showTime)||'Unknown Time',seats:selectedSeats.map(seat=>({id:seat.id,seatNumber:seat.displayName||\"\".concat(seat.seatRow).concat(seat.seatNumber),price:seat.price,type:seat.seatType})),totalAmount:selectedSeats.reduce((total,seat)=>total+(seat.price||0),0),bookingDate:new Date().toISOString(),status:'CONFIRMED'};// Store in localStorage for admin dashboard demo\nconst existingBookings=JSON.parse(localStorage.getItem('demoBookings')||'[]');const currentUser=JSON.parse(localStorage.getItem('user')||'{}');console.log('SeatSelection - Current User when creating booking:',currentUser);const newBooking=_objectSpread(_objectSpread({},bookingData),{},{id:Date.now(),// Simple ID generation\nuserId:currentUser.id,userEmail:currentUser.email,userFirstName:currentUser.firstName||'Demo',userLastName:currentUser.lastName||'User'});console.log('SeatSelection - New booking being created:',newBooking);existingBookings.push(newBooking);localStorage.setItem('demoBookings',JSON.stringify(existingBookings));console.log('SeatSelection - All bookings after adding new one:',existingBookings);// Dispatch custom event to notify other components\nwindow.dispatchEvent(new CustomEvent('bookingCreated',{detail:newBooking}));// Show success message\nalert(\"Booking confirmed! \\nMovie: \".concat(bookingData.movieTitle,\"\\nVenue: \").concat(bookingData.venueName,\"\\nDate: \").concat(bookingData.showDate,\" at \").concat(bookingData.showTime,\"\\nSeats: \").concat(bookingData.seats.map(s=>s.seatNumber).join(', '),\"\\nTotal: \\u20B9\").concat(bookingData.totalAmount));// Navigate to user bookings page\nnavigate('/user/bookings');}catch(error){console.error('Booking error:',error);alert(\"Booking failed: \".concat(error.message));}finally{setReservingSeats(false);}};// Group seats by row\nconst groupSeatsByRow=seats=>{const grouped={};seats.forEach(seat=>{// Use seatRow directly since our API provides it as a separate field\nconst row=seat.seatRow||seat.rowNumber||'A';if(!grouped[row]){grouped[row]=[];}grouped[row].push(seat);});// Sort seats within each row by seatNumber\nObject.keys(grouped).forEach(row=>{grouped[row].sort((a,b)=>{// seatNumber is already a number from our API\nconst aNum=a.seatNumber||a.columnNumber||1;const bNum=b.seatNumber||b.columnNumber||1;return aNum-bNum;});});return grouped;};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading seat layout...\"})]})});}if(error||!show){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 text-lg\",children:error||'Show data not available'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/movies'),className:\"mt-4 text-blue-600 hover:text-blue-800\",children:\"Back to Movies\"})]})});}const groupedSeats=groupSeatsByRow(seats);const rows=Object.keys(groupedSeats).sort();// Compute booked seats from localStorage once per render\nconst demoBookings=JSON.parse(localStorage.getItem('demoBookings')||'[]');const userBookings=JSON.parse(localStorage.getItem('userBookings')||'[]');const allBookedSeatIds=new Set();[...demoBookings,...userBookings].forEach(bk=>{(bk.seats||[]).forEach(s=>allBookedSeatIds.add(s.id||s));});return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),className:\"text-blue-600 hover:text-blue-800 mb-2\",children:\"\\u2190 Back to Shows\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Select Seats\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-sm text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:movie===null||movie===void 0?void 0:movie.title})}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(MapPinIcon,{className:\"h-4 w-4 mr-1\"}),(_show$venue3=show.venue)===null||_show$venue3===void 0?void 0:_show$venue3.name]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-4 w-4 mr-1\"}),new Date(show.showDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-4 w-4 mr-1\"}),show.showTime]})]})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-4 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-800 text-white py-2 px-8 rounded-full inline-block mb-2\",children:\"SCREEN\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"All eyes this way please!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-center space-x-6 mb-6 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-gray-200 border border-gray-400 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Available\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-green-500 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Selected\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-red-500 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Booked\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-orange-400 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Reserved\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto\",children:rows.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No seats available\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:rows.map(row=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 text-center font-medium text-gray-700\",children:row}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-1\",children:groupedSeats[row].map((seat,index)=>{// Add gap in the middle for aisle\nconst showAisle=index===Math.floor(groupedSeats[row].length/2);const isBooked=allBookedSeatIds.has(seat.id)||seat.isBooked||seat.status==='BOOKED';const disabled=isBooked||!seat.isAvailable||seat.isBlocked&&!reservedSeats.includes(seat.id);return/*#__PURE__*/_jsxs(React.Fragment,{children:[showAisle&&/*#__PURE__*/_jsx(\"div\",{className:\"w-4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSeatClick(seat),disabled:disabled,\"aria-label\":\"\".concat(seat.displayName||seat.seatRow+seat.seatNumber,\" - \").concat(seat.seatType,\" - \").concat(seat.isAccessible?'Accessible':'Standard'),className:\"\\n                                    w-10 h-8 rounded border text-xs font-medium transition-all duration-200 flex items-center justify-center px-1\\n                                    \".concat(getSeatStatusClass(_objectSpread(_objectSpread({},seat),{},{isBooked})),\"\\n                                    \").concat(disabled?'':'cursor-pointer transform hover:scale-105',\"\\n                                  \"),title:\"\".concat(seat.displayName||seat.seatRow+seat.seatNumber,\" - \").concat(seat.seatType,\" - \\u20B9\").concat(seat.price||0),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:seat.seatNumber}),isBooked&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 text-[10px] font-semibold\",children:\"B\"}),seat.isAccessible&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 text-[10px] font-semibold text-blue-600\",children:\"\\u267F\"})]})})]},seat.id);})})]},row))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-50 p-4 rounded-lg border border-purple-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-purple-800\",children:\"Premium\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-purple-600\",children:[\"\\u20B9\",getSeatPrice('PREMIUM')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-blue-800\",children:\"Standard\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-600\",children:[\"\\u20B9\",getSeatPrice('STANDARD')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-800\",children:\"Economy\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u20B9\",getSeatPrice('ECONOMY')]})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6 sticky top-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Booking Summary\"}),selectedSeats.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-6\",children:[/*#__PURE__*/_jsx(InformationCircleIcon,{className:\"h-12 w-12 text-gray-400 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm\",children:\"Select seats to continue\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-gray-800 mb-2\",children:[\"Selected Seats (\",selectedSeats.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:selectedSeats.map(seat=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[seat.seatNumber,\" (\",seat.seatType,\")\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",getSeatPrice(seat.seatType)]})]},seat.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t pt-4 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-semibold\",children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-bold text-green-600 flex items-center\",children:[/*#__PURE__*/_jsx(CurrencyRupeeIcon,{className:\"h-5 w-5\"}),calculateTotal()]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleBookNow,disabled:reservingSeats||selectedSeats.length===0,className:\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:reservingSeats?'Booking Tickets...':'Book Now'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedSeats([]);setReservedSeats([]);},className:\"w-full text-gray-600 py-2 text-sm hover:text-gray-800\",children:\"Clear Selection\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 p-3 bg-yellow-50 rounded-lg border border-yellow-200\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-yellow-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:\"}),\" Selected seats are temporarily reserved for you. Complete booking within 10 minutes or seats will be released.\"]})})]})})]})})]});};export default SeatSelection;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useLocation","CalendarIcon","ClockIcon","MapPinIcon","CurrencyRupeeIcon","InformationCircleIcon","ChevronLeftIcon","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SeatSelection","_show$venue3","showId","navigate","location","isAuthenticated","show","movie","state","seats","setSeats","selectedSeats","setSelectedSeats","reservedSeats","setReservedSeats","loading","setLoading","error","setError","reservingSeats","setReservingSeats","bookingSummary","setBookingSummary","showSummary","setShowSummary","API_BASE_URL","from","pathname","loadSeats","seatsData","response","fetch","concat","ok","json","console","warn","apiErr","length","_show$venue","adminLayouts","JSON","parse","localStorage","getItem","key","venue","id","screenId","adminLayout","forEach","row","seat","push","seatRow","rowLetter","seatNumber","seatType","type","isAvailable","isAccessible","err","reserveTimeout","setTimeout","method","headers","body","stringify","parseInt","seatIds","map","reservationTimeMinutes","prev","clearTimeout","handleSeatClick","isBlocked","includes","isSelected","some","s","filter","alert","getSeatStatusClass","demoBookings","userBookings","allBookedSeatIds","Set","bk","add","isBooked","has","status","getSeatPrice","price","calculateTotal","reduce","total","getBookingSummary","join","summary","handleBookNow","_show$venue2","token","bookingData","movieTitle","title","venueName","name","showDate","Date","toISOString","split","showTime","displayName","totalAmount","bookingDate","existingBookings","currentUser","log","newBooking","_objectSpread","now","userId","userEmail","email","userFirstName","firstName","userLastName","lastName","setItem","window","dispatchEvent","CustomEvent","detail","message","groupSeatsByRow","grouped","rowNumber","Object","keys","sort","a","b","aNum","columnNumber","bNum","className","children","onClick","groupedSeats","rows","toLocaleDateString","index","showAisle","Math","floor","disabled"],"sources":["C:/Users/P12C4F3/OneDrive - Dayforce HCM Inc/Desktop/Movie-1/frontend/src/components/booking/SeatSelection.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport { \r\n  CalendarIcon, \r\n  ClockIcon, \r\n  MapPinIcon, \r\n  CurrencyRupeeIcon,\r\n  InformationCircleIcon,\r\n  ChevronLeftIcon \r\n} from '@heroicons/react/24/outline';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\nconst SeatSelection = () => {\r\n  const { showId } = useParams();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { isAuthenticated } = useAuth();\r\n  \r\n  // Get show and movie data from navigation state\r\n  const { show, movie } = location.state || {};\r\n  \r\n  const [seats, setSeats] = useState([]);\r\n  const [selectedSeats, setSelectedSeats] = useState([]);\r\n  const [reservedSeats, setReservedSeats] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [reservingSeats, setReservingSeats] = useState(false);\r\n  const [bookingSummary, setBookingSummary] = useState(null);\r\n  const [showSummary, setShowSummary] = useState(false);\r\n\r\n  // API base URL\r\n  const API_BASE_URL = 'http://localhost:8080/api';\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate('/login', { state: { from: location.pathname } });\r\n      return;\r\n    }\r\n\r\n    loadSeats();\r\n  }, [showId, isAuthenticated, navigate, location]);\r\n\r\n  const loadSeats = async () => {\r\n    try {\r\n      setLoading(true);\r\n      // Try API first\r\n      let seatsData = [];\r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/seats/show/${showId}`);\r\n        if (response.ok) {\r\n          seatsData = await response.json();\r\n        } else {\r\n          console.warn('Seat API unavailable, falling back to admin-saved layout');\r\n        }\r\n      } catch (apiErr) {\r\n        console.warn('Seat API error, falling back to admin-saved layout', apiErr);\r\n      }\r\n\r\n      // If API didn't return seats, try admin saved layout in localStorage\r\n      if (!seatsData || seatsData.length === 0) {\r\n        const adminLayouts = JSON.parse(localStorage.getItem('adminSeatLayouts') || '{}');\r\n        const key = show?.venue?.id && show?.screenId ? `${show.venue.id}:${show.screenId}` : null;\r\n        if (key && adminLayouts[key]) {\r\n          // Convert admin layout (rows of seats) into flat seats array expected by SeatSelection\r\n          const adminLayout = adminLayouts[key];\r\n          seatsData = [];\r\n          adminLayout.forEach(row => {\r\n            row.forEach(seat => {\r\n              seatsData.push({\r\n                id: seat.id,\r\n                seatRow: seat.rowLetter,\r\n                seatNumber: seat.seatNumber,\r\n                seatType: seat.type === 'premium' ? 'PREMIUM' : 'STANDARD',\r\n                isAvailable: seat.isAvailable,\r\n                isAccessible: seat.isAccessible || false\r\n              });\r\n            });\r\n          });\r\n        }\r\n      }\r\n\r\n      setSeats(seatsData || []);\r\n    } catch (err) {\r\n      console.error('Error loading seats:', err);\r\n      setError('Failed to load seat layout');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate('/login', { state: { from: location.pathname } });\r\n      return;\r\n    }\r\n\r\n    loadSeats();\r\n  }, [showId, isAuthenticated, navigate, location]);\r\n\r\n  // Reserve seats when selection changes\r\n  useEffect(() => {\r\n    let reserveTimeout;\r\n    \r\n    if (selectedSeats.length > 0) {\r\n      setReservingSeats(true);\r\n      \r\n      // Reserve seats after 500ms delay to avoid too many API calls\r\n      reserveTimeout = setTimeout(async () => {\r\n        try {\r\n          const response = await fetch(`${API_BASE_URL}/booking/seats/reserve`, {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': `Bearer ${localStorage.getItem('authToken')}`\r\n            },\r\n            body: JSON.stringify({\r\n              showId: parseInt(showId),\r\n              seatIds: selectedSeats.map(seat => seat.id),\r\n              reservationTimeMinutes: 10\r\n            })\r\n          });\r\n          \r\n          if (response.ok) {\r\n            setReservedSeats(prev => [...prev, ...selectedSeats.map(seat => seat.id)]);\r\n          }\r\n        } catch (err) {\r\n          console.error('Error reserving seats:', err);\r\n        } finally {\r\n          setReservingSeats(false);\r\n        }\r\n      }, 500);\r\n    }\r\n\r\n    return () => {\r\n      if (reserveTimeout) {\r\n        clearTimeout(reserveTimeout);\r\n      }\r\n    };\r\n  }, [selectedSeats, showId]);\r\n\r\n  const handleSeatClick = (seat) => {\r\n    // Can't select unavailable or blocked seats (unless reserved by current user)\r\n    if (!seat.isAvailable || (seat.isBlocked && !reservedSeats.includes(seat.id))) {\r\n      return;\r\n    }\r\n\r\n    setSelectedSeats(prev => {\r\n      const isSelected = prev.some(s => s.id === seat.id);\r\n      if (isSelected) {\r\n        // Unselect seat\r\n        return prev.filter(s => s.id !== seat.id);\r\n      } else {\r\n        // Select seat (max 10 seats)\r\n        if (prev.length >= 10) {\r\n          alert('You can select maximum 10 seats at a time');\r\n          return prev;\r\n        }\r\n        return [...prev, seat];\r\n      }\r\n    });\r\n  };\r\n\r\n  const getSeatStatusClass = (seat) => {\r\n    const isSelected = selectedSeats.some(s => s.id === seat.id);\r\n    const demoBookings = JSON.parse(localStorage.getItem('demoBookings') || '[]');\r\n    const userBookings = JSON.parse(localStorage.getItem('userBookings') || '[]');\r\n    const allBookedSeatIds = new Set();\r\n    [...demoBookings, ...userBookings].forEach(bk => {\r\n      (bk.seats || []).forEach(s => allBookedSeatIds.add(s.id || s));\r\n    });\r\n    const isBooked = allBookedSeatIds.has(seat.id) || seat.status === 'BOOKED' || seat.isBooked;\r\n    \r\n    if (isBooked) {\r\n      return 'bg-red-500 cursor-not-allowed text-white';\r\n    }\r\n\r\n    if (!seat.isAvailable) {\r\n      return 'bg-red-500 cursor-not-allowed';\r\n    }\r\n\r\n    if (seat.isBlocked && !reservedSeats.includes(seat.id)) {\r\n      return 'bg-orange-400 cursor-not-allowed';\r\n    }\r\n\r\n    if (isSelected) {\r\n      return 'bg-green-500 text-white';\r\n    }\r\n\r\n    // Available seat - color by type\r\n    switch (seat.seatType) {\r\n      case 'PREMIUM':\r\n        return 'bg-purple-200 hover:bg-purple-300 border-purple-400';\r\n      case 'STANDARD':\r\n        return 'bg-blue-200 hover:bg-blue-300 border-blue-400';\r\n      case 'ECONOMY':\r\n        return 'bg-gray-200 hover:bg-gray-300 border-gray-400';\r\n      default:\r\n        return 'bg-gray-200 hover:bg-gray-300 border-gray-400';\r\n    }\r\n  };\r\n\r\n  const getSeatPrice = (seatType) => {\r\n    switch (seatType) {\r\n      case 'PREMIUM': return (show?.price || 250) + 100;\r\n      case 'STANDARD': return show?.price || 250;\r\n      case 'ECONOMY': return (show?.price || 250) - 50;\r\n      default: return show?.price || 250;\r\n    }\r\n  };\r\n\r\n  const calculateTotal = () => {\r\n    return selectedSeats.reduce((total, seat) => {\r\n      return total + (seat.price || 0);\r\n    }, 0);\r\n  };\r\n\r\n  const getBookingSummary = async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/booking/summary?showId=${showId}&seatIds=${selectedSeats.map(s => s.id).join(',')}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const summary = await response.json();\r\n        return summary;\r\n      }\r\n    } catch (err) {\r\n      console.error('Error getting booking summary:', err);\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const handleBookNow = async () => {\r\n    if (selectedSeats.length === 0) {\r\n      alert('Please select at least one seat');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setReservingSeats(true);\r\n      \r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        alert('Please login to book tickets');\r\n        navigate('/login');\r\n        return;\r\n      }\r\n\r\n      // Create a simple booking object for demonstration\r\n      const bookingData = {\r\n        showId: parseInt(showId),\r\n        movieTitle: movie?.title || 'Unknown Movie',\r\n        venueName: show?.venue?.name || 'Unknown Venue',\r\n        showDate: show?.showDate || new Date().toISOString().split('T')[0],\r\n        showTime: show?.showTime || 'Unknown Time',\r\n        seats: selectedSeats.map(seat => ({\r\n          id: seat.id,\r\n          seatNumber: seat.displayName || `${seat.seatRow}${seat.seatNumber}`,\r\n          price: seat.price,\r\n          type: seat.seatType\r\n        })),\r\n        totalAmount: selectedSeats.reduce((total, seat) => total + (seat.price || 0), 0),\r\n        bookingDate: new Date().toISOString(),\r\n        status: 'CONFIRMED'\r\n      };\r\n\r\n      // Store in localStorage for admin dashboard demo\r\n      const existingBookings = JSON.parse(localStorage.getItem('demoBookings') || '[]');\r\n      const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\r\n      \r\n      console.log('SeatSelection - Current User when creating booking:', currentUser);\r\n      \r\n      const newBooking = {\r\n        ...bookingData,\r\n        id: Date.now(), // Simple ID generation\r\n        userId: currentUser.id,\r\n        userEmail: currentUser.email,\r\n        userFirstName: currentUser.firstName || 'Demo',\r\n        userLastName: currentUser.lastName || 'User'\r\n      };\r\n      \r\n      console.log('SeatSelection - New booking being created:', newBooking);\r\n      \r\n      existingBookings.push(newBooking);\r\n      localStorage.setItem('demoBookings', JSON.stringify(existingBookings));\r\n      \r\n      console.log('SeatSelection - All bookings after adding new one:', existingBookings);\r\n      \r\n      // Dispatch custom event to notify other components\r\n      window.dispatchEvent(new CustomEvent('bookingCreated', {\r\n        detail: newBooking\r\n      }));\r\n      \r\n      // Show success message\r\n      alert(`Booking confirmed! \r\nMovie: ${bookingData.movieTitle}\r\nVenue: ${bookingData.venueName}\r\nDate: ${bookingData.showDate} at ${bookingData.showTime}\r\nSeats: ${bookingData.seats.map(s => s.seatNumber).join(', ')}\r\nTotal: ₹${bookingData.totalAmount}`);\r\n      \r\n      // Navigate to user bookings page\r\n      navigate('/user/bookings');\r\n      \r\n    } catch (error) {\r\n      console.error('Booking error:', error);\r\n      alert(`Booking failed: ${error.message}`);\r\n    } finally {\r\n      setReservingSeats(false);\r\n    }\r\n  };\r\n\r\n  // Group seats by row\r\n  const groupSeatsByRow = (seats) => {\r\n    const grouped = {};\r\n    seats.forEach(seat => {\r\n      // Use seatRow directly since our API provides it as a separate field\r\n      const row = seat.seatRow || seat.rowNumber || 'A';\r\n      if (!grouped[row]) {\r\n        grouped[row] = [];\r\n      }\r\n      grouped[row].push(seat);\r\n    });\r\n    \r\n    // Sort seats within each row by seatNumber\r\n    Object.keys(grouped).forEach(row => {\r\n      grouped[row].sort((a, b) => {\r\n        // seatNumber is already a number from our API\r\n        const aNum = a.seatNumber || a.columnNumber || 1;\r\n        const bNum = b.seatNumber || b.columnNumber || 1;\r\n        return aNum - bNum;\r\n      });\r\n    });\r\n    \r\n    return grouped;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">Loading seat layout...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !show) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-red-600 text-lg\">{error || 'Show data not available'}</p>\r\n          <button \r\n            onClick={() => navigate('/movies')}\r\n            className=\"mt-4 text-blue-600 hover:text-blue-800\"\r\n          >\r\n            Back to Movies\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const groupedSeats = groupSeatsByRow(seats);\r\n  const rows = Object.keys(groupedSeats).sort();\r\n\r\n  // Compute booked seats from localStorage once per render\r\n  const demoBookings = JSON.parse(localStorage.getItem('demoBookings') || '[]');\r\n  const userBookings = JSON.parse(localStorage.getItem('userBookings') || '[]');\r\n  const allBookedSeatIds = new Set();\r\n  [...demoBookings, ...userBookings].forEach(bk => {\r\n    (bk.seats || []).forEach(s => allBookedSeatIds.add(s.id || s));\r\n  });\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Header */}\r\n      <div className=\"bg-white shadow-sm\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <button\r\n                onClick={() => navigate(-1)}\r\n                className=\"text-blue-600 hover:text-blue-800 mb-2\"\r\n              >\r\n                ← Back to Shows\r\n              </button>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">Select Seats</h1>\r\n              <div className=\"flex items-center space-x-4 text-sm text-gray-600 mt-1\">\r\n                <span className=\"flex items-center\">\r\n                  <span className=\"font-medium\">{movie?.title}</span>\r\n                </span>\r\n                <span className=\"flex items-center\">\r\n                  <MapPinIcon className=\"h-4 w-4 mr-1\" />\r\n                  {show.venue?.name}\r\n                </span>\r\n                <span className=\"flex items-center\">\r\n                  <CalendarIcon className=\"h-4 w-4 mr-1\" />\r\n                  {new Date(show.showDate).toLocaleDateString()}\r\n                </span>\r\n                <span className=\"flex items-center\">\r\n                  <ClockIcon className=\"h-4 w-4 mr-1\" />\r\n                  {show.showTime}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\r\n          {/* Seat Map */}\r\n          <div className=\"lg:col-span-3\">\r\n            <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n              {/* Screen */}\r\n              <div className=\"text-center mb-8\">\r\n                <div className=\"bg-gray-800 text-white py-2 px-8 rounded-full inline-block mb-2\">\r\n                  SCREEN\r\n                </div>\r\n                <p className=\"text-sm text-gray-500\">All eyes this way please!</p>\r\n              </div>\r\n\r\n              {/* Legend */}\r\n              <div className=\"flex flex-wrap justify-center space-x-6 mb-6 text-sm\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-gray-200 border border-gray-400 rounded\"></div>\r\n                  <span>Available</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-green-500 rounded\"></div>\r\n                  <span>Selected</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-red-500 rounded\"></div>\r\n                  <span>Booked</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-orange-400 rounded\"></div>\r\n                  <span>Reserved</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Seat Grid */}\r\n              <div className=\"max-w-4xl mx-auto\">\r\n                {rows.length === 0 ? (\r\n                  <div className=\"text-center py-8\">\r\n                    <p className=\"text-gray-500\">No seats available</p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-3\">\r\n                    {rows.map(row => (\r\n                      <div key={row} className=\"flex items-center justify-center space-x-1\">\r\n                        {/* Row Label */}\r\n                        <div className=\"w-8 text-center font-medium text-gray-700\">\r\n                          {row}\r\n                        </div>\r\n                        \r\n                        {/* Seats */}\r\n                        <div className=\"flex space-x-1\">\r\n                          {groupedSeats[row].map((seat, index) => {\r\n                            // Add gap in the middle for aisle\r\n                            const showAisle = index === Math.floor(groupedSeats[row].length / 2);\r\n                            const isBooked = allBookedSeatIds.has(seat.id) || seat.isBooked || seat.status === 'BOOKED';\r\n                            const disabled = isBooked || !seat.isAvailable || (seat.isBlocked && !reservedSeats.includes(seat.id));\r\n                            \r\n                            return (\r\n                              <React.Fragment key={seat.id}>\r\n                                {showAisle && <div className=\"w-4\"></div>}\r\n                                <button\r\n                                  onClick={() => handleSeatClick(seat)}\r\n                                  disabled={disabled}\r\n                                  aria-label={`${seat.displayName || seat.seatRow + seat.seatNumber} - ${seat.seatType} - ${seat.isAccessible ? 'Accessible' : 'Standard'}`}\r\n                                  className={`\r\n                                    w-10 h-8 rounded border text-xs font-medium transition-all duration-200 flex items-center justify-center px-1\r\n                                    ${getSeatStatusClass({ ...seat, isBooked })}\r\n                                    ${disabled ? '' : 'cursor-pointer transform hover:scale-105'}\r\n                                  `}\r\n                                  title={`${seat.displayName || seat.seatRow + seat.seatNumber} - ${seat.seatType} - ₹${seat.price || 0}`}\r\n                                >\r\n                                  <div className=\"flex items-center space-x-1\">\r\n                                    <span className=\"text-xs\">{seat.seatNumber}</span>\r\n                                    {isBooked && <span className=\"ml-1 text-[10px] font-semibold\">B</span>}\r\n                                    {seat.isAccessible && <span className=\"ml-1 text-[10px] font-semibold text-blue-600\">♿</span>}\r\n                                  </div>\r\n                                </button>\r\n                              </React.Fragment>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Seat Type Pricing */}\r\n              <div className=\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <div className=\"bg-purple-50 p-4 rounded-lg border border-purple-200\">\r\n                  <h4 className=\"font-medium text-purple-800\">Premium</h4>\r\n                  <p className=\"text-sm text-purple-600\">₹{getSeatPrice('PREMIUM')}</p>\r\n                </div>\r\n                <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\r\n                  <h4 className=\"font-medium text-blue-800\">Standard</h4>\r\n                  <p className=\"text-sm text-blue-600\">₹{getSeatPrice('STANDARD')}</p>\r\n                </div>\r\n                <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-200\">\r\n                  <h4 className=\"font-medium text-gray-800\">Economy</h4>\r\n                  <p className=\"text-sm text-gray-600\">₹{getSeatPrice('ECONOMY')}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Booking Summary */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-white rounded-lg shadow-sm p-6 sticky top-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Booking Summary</h3>\r\n              \r\n              {selectedSeats.length === 0 ? (\r\n                <div className=\"text-center py-6\">\r\n                  <InformationCircleIcon className=\"h-12 w-12 text-gray-400 mx-auto mb-2\" />\r\n                  <p className=\"text-gray-500 text-sm\">Select seats to continue</p>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  {/* Selected Seats */}\r\n                  <div className=\"mb-4\">\r\n                    <h4 className=\"font-medium text-gray-800 mb-2\">\r\n                      Selected Seats ({selectedSeats.length})\r\n                    </h4>\r\n                    <div className=\"space-y-2\">\r\n                      {selectedSeats.map(seat => (\r\n                        <div key={seat.id} className=\"flex justify-between text-sm\">\r\n                          <span>{seat.seatNumber} ({seat.seatType})</span>\r\n                          <span>₹{getSeatPrice(seat.seatType)}</span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Total */}\r\n                  <div className=\"border-t pt-4 mb-6\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                      <span className=\"text-lg font-semibold\">Total</span>\r\n                      <span className=\"text-xl font-bold text-green-600 flex items-center\">\r\n                        <CurrencyRupeeIcon className=\"h-5 w-5\" />\r\n                        {calculateTotal()}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Action Buttons */}\r\n                  <div className=\"space-y-3\">\r\n                    <button\r\n                      onClick={handleBookNow}\r\n                      disabled={reservingSeats || selectedSeats.length === 0}\r\n                      className=\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                    >\r\n                      {reservingSeats ? 'Booking Tickets...' : 'Book Now'}\r\n                    </button>\r\n                    \r\n                    <button\r\n                      onClick={() => {\r\n                        setSelectedSeats([]);\r\n                        setReservedSeats([]);\r\n                      }}\r\n                      className=\"w-full text-gray-600 py-2 text-sm hover:text-gray-800\"\r\n                    >\r\n                      Clear Selection\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {/* Important Notes */}\r\n              <div className=\"mt-6 p-3 bg-yellow-50 rounded-lg border border-yellow-200\">\r\n                <p className=\"text-xs text-yellow-800\">\r\n                  <strong>Note:</strong> Selected seats are temporarily reserved for you. \r\n                  Complete booking within 10 minutes or seats will be released.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SeatSelection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}