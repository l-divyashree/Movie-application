{"ast":null,"code":"import React,{useMemo}from'react';// Small helper to aggregate bookings by date and movie\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const aggregateBookings=bookings=>{const totals={bookings:0,revenue:0,tickets:0};const byDate={};const byMovie={};bookings.forEach(b=>{const date=(b.bookingDate||'').split('T')[0]||'unknown';totals.bookings+=1;totals.revenue+=Number(b.totalAmount||0);totals.tickets+=(b.seats||[]).length;byDate[date]=(byDate[date]||0)+(b.seats||[]).length;const title=b.movieTitle||'Unknown';byMovie[title]=(byMovie[title]||0)+(b.seats||[]).length;});return{totals,byDate,byMovie};};const SimpleBarChart=_ref=>{let{data}=_ref;// data: {label: value}\nconst entries=Object.entries(data).slice(0,12);if(entries.length===0)return/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-400\",children:\"No data\"});const max=Math.max(...entries.map(_ref2=>{let[,v]=_ref2;return v;}));return/*#__PURE__*/_jsx(\"div\",{className:\"w-full overflow-x-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end h-40 space-x-3 p-3\",children:entries.map(_ref3=>{let[k,v]=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",style:{minWidth:48},children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-600 w-8 rounded-t\",style:{height:\"\".concat(v/max*100,\"%\")},title:\"\".concat(k,\": \").concat(v)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-300 mt-2 text-center break-words\",style:{width:48},children:k})]},k);})})});};const AdminAnalytics=()=>{const bookings=useMemo(()=>JSON.parse(localStorage.getItem('demoBookings')||'[]'),[]);const{totals,byDate,byMovie}=useMemo(()=>aggregateBookings(bookings),[bookings]);const topMovies=Object.entries(byMovie).sort((a,b)=>b[1]-a[1]).slice(0,5);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-transparent\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-red-600 mb-2\",children:\"Analytics\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mb-6\",children:\"Overview of recent activity (from local demo data)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-400\",children:\"Total Bookings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-white\",children:totals.bookings})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-400\",children:\"Total Tickets\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-white\",children:totals.tickets})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-400\",children:\"Total Revenue\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-white\",children:[\"\\u20B9\",totals.revenue]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg text-white mb-2\",children:\"Tickets by Date\"}),/*#__PURE__*/_jsx(SimpleBarChart,{data:byDate})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg text-white mb-2\",children:\"Top Movies (by tickets)\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"space-y-2\",children:[topMovies.length===0&&/*#__PURE__*/_jsx(\"li\",{className:\"text-sm text-gray-400\",children:\"No movie data\"}),topMovies.map(_ref4=>{let[title,count]=_ref4;return/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center justify-between bg-gray-800 p-3 rounded\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-200\",children:title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-semibold text-white\",children:count})]},title);})]})]})]});};export default AdminAnalytics;","map":{"version":3,"names":["React","useMemo","jsx","_jsx","jsxs","_jsxs","aggregateBookings","bookings","totals","revenue","tickets","byDate","byMovie","forEach","b","date","bookingDate","split","Number","totalAmount","seats","length","title","movieTitle","SimpleBarChart","_ref","data","entries","Object","slice","className","children","max","Math","map","_ref2","v","_ref3","k","style","minWidth","height","concat","width","AdminAnalytics","JSON","parse","localStorage","getItem","topMovies","sort","a","_ref4","count"],"sources":["C:/Users/P12C4F3/OneDrive - Dayforce HCM Inc/Desktop/Movie-1/frontend/src/components/admin/AdminAnalytics.js"],"sourcesContent":["import React, { useMemo } from 'react';\r\n\r\n// Small helper to aggregate bookings by date and movie\r\nconst aggregateBookings = (bookings) => {\r\n  const totals = { bookings: 0, revenue: 0, tickets: 0 };\r\n  const byDate = {};\r\n  const byMovie = {};\r\n\r\n  bookings.forEach(b => {\r\n    const date = (b.bookingDate || '').split('T')[0] || 'unknown';\r\n    totals.bookings += 1;\r\n    totals.revenue += Number(b.totalAmount || 0);\r\n    totals.tickets += (b.seats || []).length;\r\n\r\n    byDate[date] = (byDate[date] || 0) + (b.seats || []).length;\r\n    const title = b.movieTitle || 'Unknown';\r\n    byMovie[title] = (byMovie[title] || 0) + (b.seats || []).length;\r\n  });\r\n\r\n  return { totals, byDate, byMovie };\r\n};\r\n\r\nconst SimpleBarChart = ({ data }) => {\r\n  // data: {label: value}\r\n  const entries = Object.entries(data).slice(0, 12);\r\n  if (entries.length === 0) return <div className=\"text-sm text-gray-400\">No data</div>;\r\n\r\n  const max = Math.max(...entries.map(([,v]) => v));\r\n  return (\r\n    <div className=\"w-full overflow-x-auto\">\r\n      <div className=\"flex items-end h-40 space-x-3 p-3\">\r\n        {entries.map(([k, v]) => (\r\n          <div key={k} className=\"flex flex-col items-center\" style={{ minWidth: 48 }}>\r\n            <div className=\"bg-red-600 w-8 rounded-t\" style={{ height: `${(v / max) * 100}%` }} title={`${k}: ${v}`}></div>\r\n            <div className=\"text-xs text-gray-300 mt-2 text-center break-words\" style={{ width: 48 }}>{k}</div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AdminAnalytics = () => {\r\n  const bookings = useMemo(() => JSON.parse(localStorage.getItem('demoBookings') || '[]'), []);\r\n  const { totals, byDate, byMovie } = useMemo(() => aggregateBookings(bookings), [bookings]);\r\n\r\n  const topMovies = Object.entries(byMovie).sort((a,b) => b[1] - a[1]).slice(0,5);\r\n\r\n  return (\r\n    <div className=\"p-6 bg-transparent\">\r\n      <h2 className=\"text-2xl font-semibold text-red-600 mb-2\">Analytics</h2>\r\n      <p className=\"text-gray-400 mb-6\">Overview of recent activity (from local demo data)</p>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n        <div className=\"bg-gray-800 p-4 rounded-lg\">\r\n          <div className=\"text-sm text-gray-400\">Total Bookings</div>\r\n          <div className=\"text-2xl font-bold text-white\">{totals.bookings}</div>\r\n        </div>\r\n        <div className=\"bg-gray-800 p-4 rounded-lg\">\r\n          <div className=\"text-sm text-gray-400\">Total Tickets</div>\r\n          <div className=\"text-2xl font-bold text-white\">{totals.tickets}</div>\r\n        </div>\r\n        <div className=\"bg-gray-800 p-4 rounded-lg\">\r\n          <div className=\"text-sm text-gray-400\">Total Revenue</div>\r\n          <div className=\"text-2xl font-bold text-white\">â‚¹{totals.revenue}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mb-6\">\r\n        <h3 className=\"text-lg text-white mb-2\">Tickets by Date</h3>\r\n        <SimpleBarChart data={byDate} />\r\n      </div>\r\n\r\n      <div className=\"mb-6\">\r\n        <h3 className=\"text-lg text-white mb-2\">Top Movies (by tickets)</h3>\r\n        <ul className=\"space-y-2\">\r\n          {topMovies.length === 0 && <li className=\"text-sm text-gray-400\">No movie data</li>}\r\n          {topMovies.map(([title, count]) => (\r\n            <li key={title} className=\"flex items-center justify-between bg-gray-800 p-3 rounded\">\r\n              <div className=\"text-sm text-gray-200\">{title}</div>\r\n              <div className=\"text-sm font-semibold text-white\">{count}</div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminAnalytics;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,OAAO,KAAQ,OAAO,CAEtC;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,iBAAiB,CAAIC,QAAQ,EAAK,CACtC,KAAM,CAAAC,MAAM,CAAG,CAAED,QAAQ,CAAE,CAAC,CAAEE,OAAO,CAAE,CAAC,CAAEC,OAAO,CAAE,CAAE,CAAC,CACtD,KAAM,CAAAC,MAAM,CAAG,CAAC,CAAC,CACjB,KAAM,CAAAC,OAAO,CAAG,CAAC,CAAC,CAElBL,QAAQ,CAACM,OAAO,CAACC,CAAC,EAAI,CACpB,KAAM,CAAAC,IAAI,CAAG,CAACD,CAAC,CAACE,WAAW,EAAI,EAAE,EAAEC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAI,SAAS,CAC7DT,MAAM,CAACD,QAAQ,EAAI,CAAC,CACpBC,MAAM,CAACC,OAAO,EAAIS,MAAM,CAACJ,CAAC,CAACK,WAAW,EAAI,CAAC,CAAC,CAC5CX,MAAM,CAACE,OAAO,EAAI,CAACI,CAAC,CAACM,KAAK,EAAI,EAAE,EAAEC,MAAM,CAExCV,MAAM,CAACI,IAAI,CAAC,CAAG,CAACJ,MAAM,CAACI,IAAI,CAAC,EAAI,CAAC,EAAI,CAACD,CAAC,CAACM,KAAK,EAAI,EAAE,EAAEC,MAAM,CAC3D,KAAM,CAAAC,KAAK,CAAGR,CAAC,CAACS,UAAU,EAAI,SAAS,CACvCX,OAAO,CAACU,KAAK,CAAC,CAAG,CAACV,OAAO,CAACU,KAAK,CAAC,EAAI,CAAC,EAAI,CAACR,CAAC,CAACM,KAAK,EAAI,EAAE,EAAEC,MAAM,CACjE,CAAC,CAAC,CAEF,MAAO,CAAEb,MAAM,CAAEG,MAAM,CAAEC,OAAQ,CAAC,CACpC,CAAC,CAED,KAAM,CAAAY,cAAc,CAAGC,IAAA,EAAc,IAAb,CAAEC,IAAK,CAAC,CAAAD,IAAA,CAC9B;AACA,KAAM,CAAAE,OAAO,CAAGC,MAAM,CAACD,OAAO,CAACD,IAAI,CAAC,CAACG,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CACjD,GAAIF,OAAO,CAACN,MAAM,GAAK,CAAC,CAAE,mBAAOlB,IAAA,QAAK2B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,SAAO,CAAK,CAAC,CAErF,KAAM,CAAAC,GAAG,CAAGC,IAAI,CAACD,GAAG,CAAC,GAAGL,OAAO,CAACO,GAAG,CAACC,KAAA,MAAC,EAAEC,CAAC,CAAC,CAAAD,KAAA,OAAK,CAAAC,CAAC,GAAC,CAAC,CACjD,mBACEjC,IAAA,QAAK2B,SAAS,CAAC,wBAAwB,CAAAC,QAAA,cACrC5B,IAAA,QAAK2B,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAC/CJ,OAAO,CAACO,GAAG,CAACG,KAAA,MAAC,CAACC,CAAC,CAAEF,CAAC,CAAC,CAAAC,KAAA,oBAClBhC,KAAA,QAAayB,SAAS,CAAC,4BAA4B,CAACS,KAAK,CAAE,CAAEC,QAAQ,CAAE,EAAG,CAAE,CAAAT,QAAA,eAC1E5B,IAAA,QAAK2B,SAAS,CAAC,0BAA0B,CAACS,KAAK,CAAE,CAAEE,MAAM,IAAAC,MAAA,CAAMN,CAAC,CAAGJ,GAAG,CAAI,GAAG,KAAI,CAAE,CAACV,KAAK,IAAAoB,MAAA,CAAKJ,CAAC,OAAAI,MAAA,CAAKN,CAAC,CAAG,CAAM,CAAC,cAC/GjC,IAAA,QAAK2B,SAAS,CAAC,oDAAoD,CAACS,KAAK,CAAE,CAAEI,KAAK,CAAE,EAAG,CAAE,CAAAZ,QAAA,CAAEO,CAAC,CAAM,CAAC,GAF3FA,CAGL,CAAC,EACP,CAAC,CACC,CAAC,CACH,CAAC,CAEV,CAAC,CAED,KAAM,CAAAM,cAAc,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAArC,QAAQ,CAAGN,OAAO,CAAC,IAAM4C,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,EAAI,IAAI,CAAC,CAAE,EAAE,CAAC,CAC5F,KAAM,CAAExC,MAAM,CAAEG,MAAM,CAAEC,OAAQ,CAAC,CAAGX,OAAO,CAAC,IAAMK,iBAAiB,CAACC,QAAQ,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAE1F,KAAM,CAAA0C,SAAS,CAAGrB,MAAM,CAACD,OAAO,CAACf,OAAO,CAAC,CAACsC,IAAI,CAAC,CAACC,CAAC,CAACrC,CAAC,GAAKA,CAAC,CAAC,CAAC,CAAC,CAAGqC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACtB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAE/E,mBACExB,KAAA,QAAKyB,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjC5B,IAAA,OAAI2B,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,WAAS,CAAI,CAAC,cACvE5B,IAAA,MAAG2B,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,oDAAkD,CAAG,CAAC,cAExF1B,KAAA,QAAKyB,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eACzD1B,KAAA,QAAKyB,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzC5B,IAAA,QAAK2B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,gBAAc,CAAK,CAAC,cAC3D5B,IAAA,QAAK2B,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAAEvB,MAAM,CAACD,QAAQ,CAAM,CAAC,EACnE,CAAC,cACNF,KAAA,QAAKyB,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzC5B,IAAA,QAAK2B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,eAAa,CAAK,CAAC,cAC1D5B,IAAA,QAAK2B,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAAEvB,MAAM,CAACE,OAAO,CAAM,CAAC,EAClE,CAAC,cACNL,KAAA,QAAKyB,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzC5B,IAAA,QAAK2B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,eAAa,CAAK,CAAC,cAC1D1B,KAAA,QAAKyB,SAAS,CAAC,+BAA+B,CAAAC,QAAA,EAAC,QAAC,CAACvB,MAAM,CAACC,OAAO,EAAM,CAAC,EACnE,CAAC,EACH,CAAC,cAENJ,KAAA,QAAKyB,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB5B,IAAA,OAAI2B,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,cAC5D5B,IAAA,CAACqB,cAAc,EAACE,IAAI,CAAEf,MAAO,CAAE,CAAC,EAC7B,CAAC,cAENN,KAAA,QAAKyB,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB5B,IAAA,OAAI2B,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,yBAAuB,CAAI,CAAC,cACpE1B,KAAA,OAAIyB,SAAS,CAAC,WAAW,CAAAC,QAAA,EACtBkB,SAAS,CAAC5B,MAAM,GAAK,CAAC,eAAIlB,IAAA,OAAI2B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,CAClFkB,SAAS,CAACf,GAAG,CAACkB,KAAA,MAAC,CAAC9B,KAAK,CAAE+B,KAAK,CAAC,CAAAD,KAAA,oBAC5B/C,KAAA,OAAgByB,SAAS,CAAC,2DAA2D,CAAAC,QAAA,eACnF5B,IAAA,QAAK2B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAET,KAAK,CAAM,CAAC,cACpDnB,IAAA,QAAK2B,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAEsB,KAAK,CAAM,CAAC,GAFxD/B,KAGL,CAAC,EACN,CAAC,EACA,CAAC,EACF,CAAC,EAEH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAsB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}